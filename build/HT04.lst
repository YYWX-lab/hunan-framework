ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"HT04.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "modules/motor/HTmotor/HT04.c"
  20              		.section	.text.float_to_uint,"ax",%progbits
  21              		.align	1
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	float_to_uint:
  27              	.LVL0:
  28              	.LFB277:
   1:modules/motor/HTmotor/HT04.c **** #include "HT04.h"
   2:modules/motor/HTmotor/HT04.c **** #include "memory.h"
   3:modules/motor/HTmotor/HT04.c **** #include "general_def.h"
   4:modules/motor/HTmotor/HT04.c **** #include "user_lib.h"
   5:modules/motor/HTmotor/HT04.c **** #include "cmsis_os.h"
   6:modules/motor/HTmotor/HT04.c **** #include "string.h"
   7:modules/motor/HTmotor/HT04.c **** #include "daemon.h"
   8:modules/motor/HTmotor/HT04.c **** #include "stdlib.h"
   9:modules/motor/HTmotor/HT04.c **** #include "bsp_log.h"
  10:modules/motor/HTmotor/HT04.c **** 
  11:modules/motor/HTmotor/HT04.c **** static uint8_t idx;
  12:modules/motor/HTmotor/HT04.c **** static HTMotorInstance *ht_motor_instance[HT_MOTOR_CNT];
  13:modules/motor/HTmotor/HT04.c **** static osThreadId ht_task_handle[HT_MOTOR_CNT];
  14:modules/motor/HTmotor/HT04.c **** static uint8_t zero_buff[6] = {0};
  15:modules/motor/HTmotor/HT04.c **** 
  16:modules/motor/HTmotor/HT04.c **** /**
  17:modules/motor/HTmotor/HT04.c ****  * @brief ËÆæÁΩÆÁîµÊú∫Ê®°Âºè,Êä•ÊñáÂÜÖÂÆπ[0xff,0xff,0xff,0xff,0xff,0xff,0xff,cmd]
  18:modules/motor/HTmotor/HT04.c ****  *
  19:modules/motor/HTmotor/HT04.c ****  * @param cmd
  20:modules/motor/HTmotor/HT04.c ****  * @param motor
  21:modules/motor/HTmotor/HT04.c ****  */
  22:modules/motor/HTmotor/HT04.c **** static void HTMotorSetMode(HTMotor_Mode_t cmd, HTMotorInstance *motor)
  23:modules/motor/HTmotor/HT04.c **** {
  24:modules/motor/HTmotor/HT04.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
  25:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
  26:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
  27:modules/motor/HTmotor/HT04.c ****     memcpy(motor->motor_can_instace->tx_buff, zero_buff, 6);
  28:modules/motor/HTmotor/HT04.c **** }
  29:modules/motor/HTmotor/HT04.c **** /* ‰∏§‰∏™Áî®‰∫éÂ∞ÜuintÂÄºÂíåfloatÂÄºËøõË°åÊò†Â∞ÑÁöÑÂáΩÊï∞,Âú®ËÆæÂÆöÂèëÈÄÅÂÄºÂíåËß£ÊûêÂèçÈ¶àÂÄºÊó∂‰Ω
  30:modules/motor/HTmotor/HT04.c **** static uint16_t float_to_uint(float x, float x_min, float x_max, uint8_t bits)
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 2


  31:modules/motor/HTmotor/HT04.c **** {
  29              		.loc 1 31 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		@ link register save eliminated.
  32:modules/motor/HTmotor/HT04.c ****     float span = x_max - x_min;
  34              		.loc 1 32 5 view .LVU1
  35              		.loc 1 32 11 is_stmt 0 view .LVU2
  36 0000 31EE601A 		vsub.f32	s2, s2, s1
  37              	.LVL1:
  33:modules/motor/HTmotor/HT04.c ****     float offset = x_min;
  38              		.loc 1 33 5 is_stmt 1 view .LVU3
  34:modules/motor/HTmotor/HT04.c ****     return (uint16_t)((x - offset) * ((float)((1 << bits) - 1)) / span);
  39              		.loc 1 34 5 view .LVU4
  40              		.loc 1 34 26 is_stmt 0 view .LVU5
  41 0004 30EE600A 		vsub.f32	s0, s0, s1
  42              	.LVL2:
  43              		.loc 1 34 50 view .LVU6
  44 0008 0123     		movs	r3, #1
  45 000a 8340     		lsls	r3, r3, r0
  46              		.loc 1 34 59 view .LVU7
  47 000c 013B     		subs	r3, r3, #1
  48              		.loc 1 34 39 view .LVU8
  49 000e 07EE903A 		vmov	s15, r3	@ int
  50 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
  51              		.loc 1 34 36 view .LVU9
  52 0016 20EE270A 		vmul.f32	s0, s0, s15
  53              		.loc 1 34 65 view .LVU10
  54 001a C0EE017A 		vdiv.f32	s15, s0, s2
  55              		.loc 1 34 12 view .LVU11
  56 001e FCEEE77A 		vcvt.u32.f32	s15, s15
  35:modules/motor/HTmotor/HT04.c **** }
  57              		.loc 1 35 1 view .LVU12
  58 0022 17EE903A 		vmov	r3, s15	@ int
  59 0026 98B2     		uxth	r0, r3
  60              	.LVL3:
  61              		.loc 1 35 1 view .LVU13
  62 0028 7047     		bx	lr
  63              		.cfi_endproc
  64              	.LFE277:
  66              		.section	.text.uint_to_float,"ax",%progbits
  67              		.align	1
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	uint_to_float:
  73              	.LVL4:
  74              	.LFB278:
  36:modules/motor/HTmotor/HT04.c **** static float uint_to_float(int x_int, float x_min, float x_max, int bits)
  37:modules/motor/HTmotor/HT04.c **** {
  75              		.loc 1 37 1 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  80              		.loc 1 37 1 is_stmt 0 view .LVU15
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 3


  81 0000 07EE900A 		vmov	s15, r0	@ int
  38:modules/motor/HTmotor/HT04.c ****     float span = x_max - x_min;
  82              		.loc 1 38 5 is_stmt 1 view .LVU16
  83              		.loc 1 38 11 is_stmt 0 view .LVU17
  84 0004 70EEC00A 		vsub.f32	s1, s1, s0
  85              	.LVL5:
  39:modules/motor/HTmotor/HT04.c ****     float offset = x_min;
  86              		.loc 1 39 5 is_stmt 1 view .LVU18
  40:modules/motor/HTmotor/HT04.c ****     return ((float)x_int) * span / ((float)((1 << bits) - 1)) + offset;
  87              		.loc 1 40 5 view .LVU19
  88              		.loc 1 40 13 is_stmt 0 view .LVU20
  89 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
  90              		.loc 1 40 27 view .LVU21
  91 000c 27EEA07A 		vmul.f32	s14, s15, s1
  92              		.loc 1 40 48 view .LVU22
  93 0010 0123     		movs	r3, #1
  94 0012 8B40     		lsls	r3, r3, r1
  95              		.loc 1 40 57 view .LVU23
  96 0014 013B     		subs	r3, r3, #1
  97              		.loc 1 40 37 view .LVU24
  98 0016 07EE903A 		vmov	s15, r3	@ int
  99 001a F8EEE77A 		vcvt.f32.s32	s15, s15
 100              		.loc 1 40 34 view .LVU25
 101 001e C7EE276A 		vdiv.f32	s13, s14, s15
  41:modules/motor/HTmotor/HT04.c **** }
 102              		.loc 1 41 1 view .LVU26
 103 0022 36EE800A 		vadd.f32	s0, s13, s0
 104              	.LVL6:
 105              		.loc 1 41 1 view .LVU27
 106 0026 7047     		bx	lr
 107              		.cfi_endproc
 108              	.LFE278:
 110              		.section	.text.HTMotorSetMode,"ax",%progbits
 111              		.align	1
 112              		.syntax unified
 113              		.thumb
 114              		.thumb_func
 116              	HTMotorSetMode:
 117              	.LVL7:
 118              	.LFB276:
  23:modules/motor/HTmotor/HT04.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
 119              		.loc 1 23 1 is_stmt 1 view -0
 120              		.cfi_startproc
 121              		@ args = 0, pretend = 0, frame = 0
 122              		@ frame_needed = 0, uses_anonymous_args = 0
  23:modules/motor/HTmotor/HT04.c ****     memset(motor->motor_can_instace->tx_buff, 0xff, 7);  // ÂèëÈÄÅÁîµÊú∫Êåá‰ª§ÁöÑÊó∂ÂÄôÂâçÈù¢7bytes
 123              		.loc 1 23 1 is_stmt 0 view .LVU29
 124 0000 10B5     		push	{r4, lr}
 125              	.LCFI0:
 126              		.cfi_def_cfa_offset 8
 127              		.cfi_offset 4, -8
 128              		.cfi_offset 14, -4
 129 0002 0C46     		mov	r4, r1
  24:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 130              		.loc 1 24 5 is_stmt 1 view .LVU30
  24:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 131              		.loc 1 24 17 is_stmt 0 view .LVU31
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 4


 132 0004 D1F8B831 		ldr	r3, [r1, #440]
  24:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace->tx_buff[7] = (uint8_t)cmd; // ÊúÄÂêé‰∏Ä‰ΩçÊòØÂëΩ‰ª§id
 133              		.loc 1 24 5 view .LVU32
 134 0008 4FF0FF32 		mov	r2, #-1
 135 000c 5A62     		str	r2, [r3, #36]	@ unaligned
 136 000e C3F82720 		str	r2, [r3, #39]	@ unaligned
  25:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 137              		.loc 1 25 5 is_stmt 1 view .LVU33
  25:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 138              		.loc 1 25 10 is_stmt 0 view .LVU34
 139 0012 D1F8B831 		ldr	r3, [r1, #440]
  25:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 140              		.loc 1 25 42 view .LVU35
 141 0016 83F82B00 		strb	r0, [r3, #43]
  26:modules/motor/HTmotor/HT04.c ****     memcpy(motor->motor_can_instace->tx_buff, zero_buff, 6);
 142              		.loc 1 26 5 is_stmt 1 view .LVU36
 143 001a B7EE000A 		vmov.f32	s0, #1.0e+0
 144 001e D1F8B801 		ldr	r0, [r1, #440]
 145              	.LVL8:
  26:modules/motor/HTmotor/HT04.c ****     memcpy(motor->motor_can_instace->tx_buff, zero_buff, 6);
 146              		.loc 1 26 5 is_stmt 0 view .LVU37
 147 0022 FFF7FEFF 		bl	CANTransmit
 148              	.LVL9:
  27:modules/motor/HTmotor/HT04.c **** }
 149              		.loc 1 27 5 is_stmt 1 view .LVU38
  27:modules/motor/HTmotor/HT04.c **** }
 150              		.loc 1 27 17 is_stmt 0 view .LVU39
 151 0026 D4F8B831 		ldr	r3, [r4, #440]
  27:modules/motor/HTmotor/HT04.c **** }
 152              		.loc 1 27 5 view .LVU40
 153 002a 034A     		ldr	r2, .L5
 154 002c 1068     		ldr	r0, [r2]
 155 002e 5862     		str	r0, [r3, #36]	@ unaligned
 156 0030 9288     		ldrh	r2, [r2, #4]	@ unaligned
 157 0032 1A85     		strh	r2, [r3, #40]	@ unaligned
  28:modules/motor/HTmotor/HT04.c **** /* ‰∏§‰∏™Áî®‰∫éÂ∞ÜuintÂÄºÂíåfloatÂÄºËøõË°åÊò†Â∞ÑÁöÑÂáΩÊï∞,Âú®ËÆæÂÆöÂèëÈÄÅÂÄºÂíåËß£ÊûêÂèçÈ¶àÂÄºÊó∂‰Ω
 158              		.loc 1 28 1 view .LVU41
 159 0034 10BD     		pop	{r4, pc}
 160              	.LVL10:
 161              	.L6:
  28:modules/motor/HTmotor/HT04.c **** /* ‰∏§‰∏™Áî®‰∫éÂ∞ÜuintÂÄºÂíåfloatÂÄºËøõË°åÊò†Â∞ÑÁöÑÂáΩÊï∞,Âú®ËÆæÂÆöÂèëÈÄÅÂÄºÂíåËß£ÊûêÂèçÈ¶àÂÄºÊó∂‰Ω
 162              		.loc 1 28 1 view .LVU42
 163 0036 00BF     		.align	2
 164              	.L5:
 165 0038 00000000 		.word	zero_buff
 166              		.cfi_endproc
 167              	.LFE276:
 169              		.section	.text.HTMotorLostCallback,"ax",%progbits
 170              		.align	1
 171              		.syntax unified
 172              		.thumb
 173              		.thumb_func
 175              	HTMotorLostCallback:
 176              	.LVL11:
 177              	.LFB280:
  42:modules/motor/HTmotor/HT04.c **** 
  43:modules/motor/HTmotor/HT04.c **** /**
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 5


  44:modules/motor/HTmotor/HT04.c ****  * @brief Ëß£ÊûêÁîµÊú∫ÂèçÈ¶àÂÄº
  45:modules/motor/HTmotor/HT04.c ****  *
  46:modules/motor/HTmotor/HT04.c ****  * @param motor_can Êî∂Âà∞
  47:modules/motor/HTmotor/HT04.c ****  */
  48:modules/motor/HTmotor/HT04.c **** static void HTMotorDecode(CANInstance *motor_can)
  49:modules/motor/HTmotor/HT04.c **** {
  50:modules/motor/HTmotor/HT04.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
  51:modules/motor/HTmotor/HT04.c ****     uint8_t const *rxbuff = motor_can->rx_buff;
  52:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)motor_can->id;
  53:modules/motor/HTmotor/HT04.c ****     HTMotor_Measure_t *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆû
  54:modules/motor/HTmotor/HT04.c **** 
  55:modules/motor/HTmotor/HT04.c ****     DaemonReload(motor->motor_daemon);
  56:modules/motor/HTmotor/HT04.c ****     measure->feed_dt = DWT_GetDeltaT(&measure->feed_cnt);
  57:modules/motor/HTmotor/HT04.c **** 
  58:modules/motor/HTmotor/HT04.c ****     measure->last_angle = measure->total_angle;
  59:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
  60:modules/motor/HTmotor/HT04.c ****     measure->total_angle = uint_to_float(tmp, P_MIN, P_MAX, 16);
  61:modules/motor/HTmotor/HT04.c **** 
  62:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)(rxbuff[3] << 4) | (rxbuff[4] >> 4);
  63:modules/motor/HTmotor/HT04.c ****     measure->speed_rads = AverageFilter((uint_to_float(tmp, V_MIN, V_MAX, 12) - HT_SPEED_BIAS), mea
  64:modules/motor/HTmotor/HT04.c **** 
  65:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)(((rxbuff[4] & 0x0f) << 8) | rxbuff[5]);
  66:modules/motor/HTmotor/HT04.c ****     measure->real_current = CURRENT_SMOOTH_COEF * uint_to_float(tmp, T_MIN, T_MAX, 12) +
  67:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
  68:modules/motor/HTmotor/HT04.c **** }
  69:modules/motor/HTmotor/HT04.c **** 
  70:modules/motor/HTmotor/HT04.c **** static void HTMotorLostCallback(void *motor_ptr)
  71:modules/motor/HTmotor/HT04.c **** {
 178              		.loc 1 71 1 is_stmt 1 view -0
 179              		.cfi_startproc
 180              		@ args = 0, pretend = 0, frame = 0
 181              		@ frame_needed = 0, uses_anonymous_args = 0
 182              		.loc 1 71 1 is_stmt 0 view .LVU44
 183 0000 08B5     		push	{r3, lr}
 184              	.LCFI1:
 185              		.cfi_def_cfa_offset 8
 186              		.cfi_offset 3, -8
 187              		.cfi_offset 14, -4
 188 0002 0146     		mov	r1, r0
  72:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)motor_ptr;
 189              		.loc 1 72 5 is_stmt 1 view .LVU45
 190              	.LVL12:
  73:modules/motor/HTmotor/HT04.c ****     LOGWARNING("[ht_motor] motor %d lost\n", motor->motor_can_instace->tx_id);
 191              		.loc 1 73 78 view .LVU46
  74:modules/motor/HTmotor/HT04.c ****     if (++motor->lost_cnt % 10 != 0)
 192              		.loc 1 74 5 view .LVU47
 193              		.loc 1 74 16 is_stmt 0 view .LVU48
 194 0004 D0F8C021 		ldr	r2, [r0, #448]
 195              		.loc 1 74 9 view .LVU49
 196 0008 0132     		adds	r2, r2, #1
 197              		.loc 1 74 8 view .LVU50
 198 000a C0F8C021 		str	r2, [r0, #448]
 199              		.loc 1 74 27 view .LVU51
 200 000e 074B     		ldr	r3, .L11
 201 0010 A3FB0203 		umull	r0, r3, r3, r2
 202              	.LVL13:
 203              		.loc 1 74 27 view .LVU52
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 6


 204 0014 DB08     		lsrs	r3, r3, #3
 205 0016 03EB8303 		add	r3, r3, r3, lsl #2
 206              		.loc 1 74 8 view .LVU53
 207 001a B2EB430F 		cmp	r2, r3, lsl #1
 208 001e 00D1     		bne	.L10
 209              	.LVL14:
 210              	.L7:
  75:modules/motor/HTmotor/HT04.c ****         HTMotorSetMode(CMD_MOTOR_MODE, motor); // Â∞ùËØïÈáçÊñ∞ËÆ©ÁîµÊú∫ËøõÂÖ•ÊéßÂà∂Ê®°Âºè
  76:modules/motor/HTmotor/HT04.c **** }
 211              		.loc 1 76 1 view .LVU54
 212 0020 08BD     		pop	{r3, pc}
 213              	.LVL15:
 214              	.L10:
  75:modules/motor/HTmotor/HT04.c ****         HTMotorSetMode(CMD_MOTOR_MODE, motor); // Â∞ùËØïÈáçÊñ∞ËÆ©ÁîµÊú∫ËøõÂÖ•ÊéßÂà∂Ê®°Âºè
 215              		.loc 1 75 9 is_stmt 1 view .LVU55
 216 0022 FC20     		movs	r0, #252
 217 0024 FFF7FEFF 		bl	HTMotorSetMode
 218              	.LVL16:
 219              		.loc 1 76 1 is_stmt 0 view .LVU56
 220 0028 FAE7     		b	.L7
 221              	.L12:
 222 002a 00BF     		.align	2
 223              	.L11:
 224 002c CDCCCCCC 		.word	-858993459
 225              		.cfi_endproc
 226              	.LFE280:
 228              		.section	.text.HTMotorDecode,"ax",%progbits
 229              		.align	1
 230              		.syntax unified
 231              		.thumb
 232              		.thumb_func
 234              	HTMotorDecode:
 235              	.LVL17:
 236              	.LFB279:
  49:modules/motor/HTmotor/HT04.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
 237              		.loc 1 49 1 is_stmt 1 view -0
 238              		.cfi_startproc
 239              		@ args = 0, pretend = 0, frame = 0
 240              		@ frame_needed = 0, uses_anonymous_args = 0
  49:modules/motor/HTmotor/HT04.c ****     uint16_t tmp; // Áî®‰∫éÊöÇÂ≠òËß£ÊûêÂÄº,Á®çÂêéËΩ¨Êç¢ÊàêfloatÊï∞ÊçÆ,ÈÅøÂÖçÂ§öÊ¨°ÂàõÂª∫‰∏¥Êó∂ÂèòÈá
 241              		.loc 1 49 1 is_stmt 0 view .LVU58
 242 0000 70B5     		push	{r4, r5, r6, lr}
 243              	.LCFI2:
 244              		.cfi_def_cfa_offset 16
 245              		.cfi_offset 4, -16
 246              		.cfi_offset 5, -12
 247              		.cfi_offset 6, -8
 248              		.cfi_offset 14, -4
 249 0002 0546     		mov	r5, r0
  50:modules/motor/HTmotor/HT04.c ****     uint8_t const *rxbuff = motor_can->rx_buff;
 250              		.loc 1 50 5 is_stmt 1 view .LVU59
  51:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)motor_can->id;
 251              		.loc 1 51 5 view .LVU60
 252              	.LVL18:
  52:modules/motor/HTmotor/HT04.c ****     HTMotor_Measure_t *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆû
 253              		.loc 1 52 5 view .LVU61
  52:modules/motor/HTmotor/HT04.c ****     HTMotor_Measure_t *measure = &(motor->measure); // Â∞ÜcanÂÆû‰æã‰∏≠‰øùÂ≠òÁöÑidËΩ¨Êç¢ÊàêÁîµÊú∫ÂÆû
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 7


 254              		.loc 1 52 22 is_stmt 0 view .LVU62
 255 0004 D0F83D40 		ldr	r4, [r0, #61]	@ unaligned
 256              	.LVL19:
  53:modules/motor/HTmotor/HT04.c **** 
 257              		.loc 1 53 5 is_stmt 1 view .LVU63
  55:modules/motor/HTmotor/HT04.c ****     measure->feed_dt = DWT_GetDeltaT(&measure->feed_cnt);
 258              		.loc 1 55 5 view .LVU64
 259 0008 D4F8BC01 		ldr	r0, [r4, #444]
 260              	.LVL20:
  55:modules/motor/HTmotor/HT04.c ****     measure->feed_dt = DWT_GetDeltaT(&measure->feed_cnt);
 261              		.loc 1 55 5 is_stmt 0 view .LVU65
 262 000c FFF7FEFF 		bl	DaemonReload
 263              	.LVL21:
  56:modules/motor/HTmotor/HT04.c **** 
 264              		.loc 1 56 5 is_stmt 1 view .LVU66
  56:modules/motor/HTmotor/HT04.c **** 
 265              		.loc 1 56 24 is_stmt 0 view .LVU67
 266 0010 04F12800 		add	r0, r4, #40
 267 0014 FFF7FEFF 		bl	DWT_GetDeltaT
 268              	.LVL22:
  56:modules/motor/HTmotor/HT04.c **** 
 269              		.loc 1 56 22 discriminator 1 view .LVU68
 270 0018 84ED090A 		vstr.32	s0, [r4, #36]
  58:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 271              		.loc 1 58 5 is_stmt 1 view .LVU69
  58:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 272              		.loc 1 58 34 is_stmt 0 view .LVU70
 273 001c 2368     		ldr	r3, [r4]	@ float
  58:modules/motor/HTmotor/HT04.c ****     tmp = (uint16_t)((rxbuff[1] << 8) | rxbuff[2]);
 274              		.loc 1 58 25 view .LVU71
 275 001e 6360     		str	r3, [r4, #4]	@ float
  59:modules/motor/HTmotor/HT04.c ****     measure->total_angle = uint_to_float(tmp, P_MIN, P_MAX, 16);
 276              		.loc 1 59 5 is_stmt 1 view .LVU72
  59:modules/motor/HTmotor/HT04.c ****     measure->total_angle = uint_to_float(tmp, P_MIN, P_MAX, 16);
 277              		.loc 1 59 29 is_stmt 0 view .LVU73
 278 0020 95F82D00 		ldrb	r0, [r5, #45]	@ zero_extendqisi2
  59:modules/motor/HTmotor/HT04.c ****     measure->total_angle = uint_to_float(tmp, P_MIN, P_MAX, 16);
 279              		.loc 1 59 47 view .LVU74
 280 0024 95F82E30 		ldrb	r3, [r5, #46]	@ zero_extendqisi2
 281              	.LVL23:
  60:modules/motor/HTmotor/HT04.c **** 
 282              		.loc 1 60 5 is_stmt 1 view .LVU75
  60:modules/motor/HTmotor/HT04.c **** 
 283              		.loc 1 60 28 is_stmt 0 view .LVU76
 284 0028 1021     		movs	r1, #16
 285 002a DFED210A 		vldr.32	s1, .L15
 286 002e 9FED210A 		vldr.32	s0, .L15+4
 287 0032 43EA0020 		orr	r0, r3, r0, lsl #8
 288              	.LVL24:
  60:modules/motor/HTmotor/HT04.c **** 
 289              		.loc 1 60 28 view .LVU77
 290 0036 FFF7FEFF 		bl	uint_to_float
 291              	.LVL25:
  60:modules/motor/HTmotor/HT04.c **** 
 292              		.loc 1 60 26 discriminator 1 view .LVU78
 293 003a 2646     		mov	r6, r4
 294 003c 0C36     		adds	r6, r6, #12
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 8


 295 003e 84ED000A 		vstr.32	s0, [r4]
  62:modules/motor/HTmotor/HT04.c ****     measure->speed_rads = AverageFilter((uint_to_float(tmp, V_MIN, V_MAX, 12) - HT_SPEED_BIAS), mea
 296              		.loc 1 62 5 is_stmt 1 view .LVU79
  62:modules/motor/HTmotor/HT04.c ****     measure->speed_rads = AverageFilter((uint_to_float(tmp, V_MIN, V_MAX, 12) - HT_SPEED_BIAS), mea
 297              		.loc 1 62 28 is_stmt 0 view .LVU80
 298 0042 95F82F00 		ldrb	r0, [r5, #47]	@ zero_extendqisi2
  62:modules/motor/HTmotor/HT04.c ****     measure->speed_rads = AverageFilter((uint_to_float(tmp, V_MIN, V_MAX, 12) - HT_SPEED_BIAS), mea
 299              		.loc 1 62 47 view .LVU81
 300 0046 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
  62:modules/motor/HTmotor/HT04.c ****     measure->speed_rads = AverageFilter((uint_to_float(tmp, V_MIN, V_MAX, 12) - HT_SPEED_BIAS), mea
 301              		.loc 1 62 38 view .LVU82
 302 004a 1B09     		lsrs	r3, r3, #4
 303              	.LVL26:
  63:modules/motor/HTmotor/HT04.c **** 
 304              		.loc 1 63 5 is_stmt 1 view .LVU83
  63:modules/motor/HTmotor/HT04.c **** 
 305              		.loc 1 63 42 is_stmt 0 view .LVU84
 306 004c 0C21     		movs	r1, #12
 307 004e DFED1A0A 		vldr.32	s1, .L15+8
 308 0052 9FED1A0A 		vldr.32	s0, .L15+12
 309 0056 43EA0010 		orr	r0, r3, r0, lsl #4
 310              	.LVL27:
  63:modules/motor/HTmotor/HT04.c **** 
 311              		.loc 1 63 42 view .LVU85
 312 005a FFF7FEFF 		bl	uint_to_float
 313              	.LVL28:
  63:modules/motor/HTmotor/HT04.c **** 
 314              		.loc 1 63 27 discriminator 1 view .LVU86
 315 005e 0521     		movs	r1, #5
 316 0060 3046     		mov	r0, r6
 317 0062 DFED177A 		vldr.32	s15, .L15+16
 318 0066 30EE270A 		vadd.f32	s0, s0, s15
 319 006a FFF7FEFF 		bl	AverageFilter
 320              	.LVL29:
  63:modules/motor/HTmotor/HT04.c **** 
 321              		.loc 1 63 25 discriminator 2 view .LVU87
 322 006e 84ED020A 		vstr.32	s0, [r4, #8]
  65:modules/motor/HTmotor/HT04.c ****     measure->real_current = CURRENT_SMOOTH_COEF * uint_to_float(tmp, T_MIN, T_MAX, 12) +
 323              		.loc 1 65 5 is_stmt 1 view .LVU88
  65:modules/motor/HTmotor/HT04.c ****     measure->real_current = CURRENT_SMOOTH_COEF * uint_to_float(tmp, T_MIN, T_MAX, 12) +
 324              		.loc 1 65 30 is_stmt 0 view .LVU89
 325 0072 95F83030 		ldrb	r3, [r5, #48]	@ zero_extendqisi2
  65:modules/motor/HTmotor/HT04.c ****     measure->real_current = CURRENT_SMOOTH_COEF * uint_to_float(tmp, T_MIN, T_MAX, 12) +
 326              		.loc 1 65 56 view .LVU90
 327 0076 95F83100 		ldrb	r0, [r5, #49]	@ zero_extendqisi2
  65:modules/motor/HTmotor/HT04.c ****     measure->real_current = CURRENT_SMOOTH_COEF * uint_to_float(tmp, T_MIN, T_MAX, 12) +
 328              		.loc 1 65 48 view .LVU91
 329 007a 1B02     		lsls	r3, r3, #8
 330 007c 03F47063 		and	r3, r3, #3840
 331              	.LVL30:
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 332              		.loc 1 66 5 is_stmt 1 view .LVU92
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 333              		.loc 1 66 51 is_stmt 0 view .LVU93
 334 0080 0C21     		movs	r1, #12
 335 0082 F3EE020A 		vmov.f32	s1, #1.8e+1
 336 0086 BBEE020A 		vmov.f32	s0, #-1.8e+1
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 9


 337 008a 1843     		orrs	r0, r0, r3
 338              	.LVL31:
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 339              		.loc 1 66 51 view .LVU94
 340 008c FFF7FEFF 		bl	uint_to_float
 341              	.LVL32:
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 342              		.loc 1 66 49 discriminator 1 view .LVU95
 343 0090 DFED0C7A 		vldr.32	s15, .L15+20
 344 0094 20EE270A 		vmul.f32	s0, s0, s15
  67:modules/motor/HTmotor/HT04.c **** }
 345              		.loc 1 67 64 view .LVU96
 346 0098 D4ED087A 		vldr.32	s15, [r4, #32]
  67:modules/motor/HTmotor/HT04.c **** }
 347              		.loc 1 67 55 view .LVU97
 348 009c 9FED0A7A 		vldr.32	s14, .L15+24
 349 00a0 67EE877A 		vmul.f32	s15, s15, s14
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 350              		.loc 1 66 88 view .LVU98
 351 00a4 30EE270A 		vadd.f32	s0, s0, s15
  66:modules/motor/HTmotor/HT04.c ****                             (1 - CURRENT_SMOOTH_COEF) * measure->real_current;
 352              		.loc 1 66 27 view .LVU99
 353 00a8 84ED080A 		vstr.32	s0, [r4, #32]
  68:modules/motor/HTmotor/HT04.c **** 
 354              		.loc 1 68 1 view .LVU100
 355 00ac 70BD     		pop	{r4, r5, r6, pc}
 356              	.LVL33:
 357              	.L16:
  68:modules/motor/HTmotor/HT04.c **** 
 358              		.loc 1 68 1 view .LVU101
 359 00ae 00BF     		.align	2
 360              	.L15:
 361 00b0 0000BF42 		.word	1119813632
 362 00b4 0000BFC2 		.word	-1027670016
 363 00b8 00003442 		.word	1110704128
 364 00bc 000034C2 		.word	-1036779520
 365 00c0 0010343C 		.word	1010044928
 366 00c4 6666663F 		.word	1063675494
 367 00c8 D0CCCC3D 		.word	1036831952
 368              		.cfi_endproc
 369              	.LFE279:
 371              		.section	.text.HTMotorTask,"ax",%progbits
 372              		.align	1
 373              		.global	HTMotorTask
 374              		.syntax unified
 375              		.thumb
 376              		.thumb_func
 378              	HTMotorTask:
 379              	.LVL34:
 380              	.LFB284:
  77:modules/motor/HTmotor/HT04.c **** 
  78:modules/motor/HTmotor/HT04.c **** /* Êµ∑Ê≥∞ÁîµÊú∫‰∏ÄÁîüÈªë,‰ªÄ‰πàÂûÉÂúæÂçèËÆÆ! */
  79:modules/motor/HTmotor/HT04.c **** void HTMotorCalibEncoder(HTMotorInstance *motor)
  80:modules/motor/HTmotor/HT04.c **** {
  81:modules/motor/HTmotor/HT04.c ****     uint16_t p, v, kp, kd, t;
  82:modules/motor/HTmotor/HT04.c ****     p = float_to_uint(0, P_MIN, P_MAX, 16);
  83:modules/motor/HTmotor/HT04.c ****     v = float_to_uint(0, V_MIN, V_MAX, 12);
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 10


  84:modules/motor/HTmotor/HT04.c ****     kp = float_to_uint(0, KP_MIN, KP_MAX, 12);
  85:modules/motor/HTmotor/HT04.c ****     kd = float_to_uint(0, KD_MIN, KD_MAX, 12);
  86:modules/motor/HTmotor/HT04.c ****     t = float_to_uint(0, T_MIN, T_MAX, 12);
  87:modules/motor/HTmotor/HT04.c **** 
  88:modules/motor/HTmotor/HT04.c ****     uint8_t *buf = motor->motor_can_instace->tx_buff;
  89:modules/motor/HTmotor/HT04.c ****     buf[0] = p >> 8;
  90:modules/motor/HTmotor/HT04.c ****     buf[1] = p & 0xFF;
  91:modules/motor/HTmotor/HT04.c ****     buf[2] = v >> 4;
  92:modules/motor/HTmotor/HT04.c ****     buf[3] = ((v & 0xF) << 4) | (kp >> 8);
  93:modules/motor/HTmotor/HT04.c ****     buf[4] = kp & 0xFF;
  94:modules/motor/HTmotor/HT04.c ****     buf[5] = kd >> 4;
  95:modules/motor/HTmotor/HT04.c ****     buf[6] = ((kd & 0xF) << 4) | (t >> 8);
  96:modules/motor/HTmotor/HT04.c ****     buf[7] = t & 0xff;
  97:modules/motor/HTmotor/HT04.c ****     memcpy(zero_buff, buf, 6); // ÂàùÂßãÂåñÁöÑÊó∂ÂÄôËá≥Â∞ëË∞ÉÁî®‰∏ÄÊ¨°,ÊïÖÂ∞ÜÂÖ∂‰ªñÊåá‰ª§‰∏∫0Êó∂Âèë
  98:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
  99:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.005);
 100:modules/motor/HTmotor/HT04.c ****     HTMotorSetMode(CMD_ZERO_POSITION, motor); // sb Áé©ÊÑèÊ†°ÂáÜÂÆå‰∫ÜÁºñÁ†ÅÂô®‰πü‰∏ç‰∏∫0
 101:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.005);
 102:modules/motor/HTmotor/HT04.c ****     // HTMotorSetMode(CMD_MOTOR_MODE, motor);
 103:modules/motor/HTmotor/HT04.c **** }
 104:modules/motor/HTmotor/HT04.c **** 
 105:modules/motor/HTmotor/HT04.c **** HTMotorInstance *HTMotorInit(Motor_Init_Config_s *config)
 106:modules/motor/HTmotor/HT04.c **** {
 107:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)malloc(sizeof(HTMotorInstance));
 108:modules/motor/HTmotor/HT04.c ****     memset(motor, 0, sizeof(HTMotorInstance));
 109:modules/motor/HTmotor/HT04.c **** 
 110:modules/motor/HTmotor/HT04.c ****     motor->motor_settings = config->controller_setting_init_config;
 111:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
 112:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->speed_PID, &config->controller_param_init_config.speed_PID);
 113:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->angle_PID, &config->controller_param_init_config.angle_PID);
 114:modules/motor/HTmotor/HT04.c ****     motor->other_angle_feedback_ptr = config->controller_param_init_config.other_angle_feedback_ptr
 115:modules/motor/HTmotor/HT04.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 116:modules/motor/HTmotor/HT04.c **** 
 117:modules/motor/HTmotor/HT04.c ****     config->can_init_config.can_module_callback = HTMotorDecode;
 118:modules/motor/HTmotor/HT04.c ****     config->can_init_config.id = motor;
 119:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
 120:modules/motor/HTmotor/HT04.c **** 
 121:modules/motor/HTmotor/HT04.c ****     Daemon_Init_Config_s conf = {
 122:modules/motor/HTmotor/HT04.c ****         .callback = HTMotorLostCallback,
 123:modules/motor/HTmotor/HT04.c ****         .owner_id = motor,
 124:modules/motor/HTmotor/HT04.c ****         .reload_count = 5, // 50ms
 125:modules/motor/HTmotor/HT04.c ****     };
 126:modules/motor/HTmotor/HT04.c ****     motor->motor_daemon = DaemonRegister(&conf);
 127:modules/motor/HTmotor/HT04.c **** 
 128:modules/motor/HTmotor/HT04.c ****     HTMotorEnable(motor);
 129:modules/motor/HTmotor/HT04.c ****     HTMotorSetMode(CMD_MOTOR_MODE, motor); // Á°Æ‰øùÁîµÊú∫Â∑≤Áªè‰∏äÁîµÂπ∂ÊâßË°åÁîµÊú∫Ê®°Âºè
 130:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.05f);
 131:modules/motor/HTmotor/HT04.c ****     HTMotorCalibEncoder(motor); // Â∞ÜÂΩìÂâçÁºñÁ†ÅÂô®‰ΩçÁΩÆ‰Ωú‰∏∫Èõ∂‰Ωç
 132:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.05f);           // ‰øùËØÅ‰∏ã‰∏Ä‰∏™ÁîµÊú∫ÂèëÈÄÅÊó∂CANÊòØÁ©∫Èó≤ÁöÑ,Ê≥®ÊÑèÂ∫îÁî®Âú®Âàù
 133:modules/motor/HTmotor/HT04.c ****     ht_motor_instance[idx++] = motor;
 134:modules/motor/HTmotor/HT04.c ****     return motor;
 135:modules/motor/HTmotor/HT04.c **** }
 136:modules/motor/HTmotor/HT04.c **** 
 137:modules/motor/HTmotor/HT04.c **** void HTMotorSetRef(HTMotorInstance *motor, float ref)
 138:modules/motor/HTmotor/HT04.c **** {
 139:modules/motor/HTmotor/HT04.c ****     motor->pid_ref = ref;
 140:modules/motor/HTmotor/HT04.c **** }
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 11


 141:modules/motor/HTmotor/HT04.c **** 
 142:modules/motor/HTmotor/HT04.c **** /**
 143:modules/motor/HTmotor/HT04.c ****  * @brief ‰∏∫‰∫ÜÈÅøÂÖçÊÄªÁ∫øÂ†µÂ°û,‰∏∫ÊØè‰∏™ÁîµÊú∫ÂàõÂª∫‰∏Ä‰∏™ÂèëÈÄÅ‰ªªÂä°
 144:modules/motor/HTmotor/HT04.c ****  * @param argument ‰º†ÂÖ•ÁöÑÁîµÊú∫ÊåáÈíà
 145:modules/motor/HTmotor/HT04.c ****  */
 146:modules/motor/HTmotor/HT04.c **** __attribute__((noreturn)) void HTMotorTask(void const *argument)
 147:modules/motor/HTmotor/HT04.c **** {
 381              		.loc 1 147 1 is_stmt 1 view -0
 382              		.cfi_startproc
 383              		@ Volatile: function does not return.
 384              		@ args = 0, pretend = 0, frame = 0
 385              		@ frame_needed = 0, uses_anonymous_args = 0
 386              		.loc 1 147 1 is_stmt 0 view .LVU103
 387 0000 08B5     		push	{r3, lr}
 388              	.LCFI3:
 389              		.cfi_def_cfa_offset 8
 390              		.cfi_offset 3, -8
 391              		.cfi_offset 14, -4
 392 0002 0446     		mov	r4, r0
 148:modules/motor/HTmotor/HT04.c ****     float set, pid_measure, pid_ref;
 393              		.loc 1 148 5 is_stmt 1 view .LVU104
 149:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)argument;
 394              		.loc 1 149 5 view .LVU105
 395              	.LVL35:
 150:modules/motor/HTmotor/HT04.c ****     HTMotor_Measure_t *measure = &motor->measure;
 396              		.loc 1 150 5 view .LVU106
 151:modules/motor/HTmotor/HT04.c ****     Motor_Control_Setting_s *setting = &motor->motor_settings;
 397              		.loc 1 151 5 view .LVU107
 152:modules/motor/HTmotor/HT04.c ****     CANInstance *motor_can = motor->motor_can_instace;
 398              		.loc 1 152 5 view .LVU108
 399              		.loc 1 152 18 is_stmt 0 view .LVU109
 400 0004 D0F8B851 		ldr	r5, [r0, #440]
 401              	.LVL36:
 402              		.loc 1 152 18 view .LVU110
 403 0008 48E0     		b	.L31
 404              	.LVL37:
 405              	.L36:
 153:modules/motor/HTmotor/HT04.c ****     uint16_t tmp;
 154:modules/motor/HTmotor/HT04.c **** 
 155:modules/motor/HTmotor/HT04.c ****     while (1)
 156:modules/motor/HTmotor/HT04.c ****     {
 157:modules/motor/HTmotor/HT04.c ****         pid_ref = motor->pid_ref;
 158:modules/motor/HTmotor/HT04.c ****         if (setting->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 159:modules/motor/HTmotor/HT04.c ****             pid_ref *= -1;
 406              		.loc 1 159 13 is_stmt 1 view .LVU111
 407              		.loc 1 159 21 is_stmt 0 view .LVU112
 408 000a B1EE400A 		vneg.f32	s0, s0
 409              	.LVL38:
 410              		.loc 1 159 21 view .LVU113
 411 000e 4BE0     		b	.L18
 412              	.LVL39:
 413              	.L37:
 160:modules/motor/HTmotor/HT04.c **** 
 161:modules/motor/HTmotor/HT04.c ****         if ((setting->close_loop_type & ANGLE_LOOP) && setting->outer_loop_type == ANGLE_LOOP)
 162:modules/motor/HTmotor/HT04.c ****         {
 163:modules/motor/HTmotor/HT04.c ****             if (setting->angle_feedback_source == OTHER_FEED)
 414              		.loc 1 163 13 is_stmt 1 view .LVU114
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 12


 415              		.loc 1 163 24 is_stmt 0 view .LVU115
 416 0010 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 417              		.loc 1 163 16 view .LVU116
 418 0014 012B     		cmp	r3, #1
 419 0016 0CD0     		beq	.L35
 164:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_angle_feedback_ptr;
 165:modules/motor/HTmotor/HT04.c ****             else
 166:modules/motor/HTmotor/HT04.c ****                 pid_measure = measure->total_angle;
 420              		.loc 1 166 17 is_stmt 1 view .LVU117
 421              		.loc 1 166 29 is_stmt 0 view .LVU118
 422 0018 94ED007A 		vldr.32	s14, [r4]
 423              	.L21:
 424              	.LVL40:
 167:modules/motor/HTmotor/HT04.c ****             // measureÂçï‰ΩçÊòØrad,refÊòØËßíÂ∫¶,Áªü‰∏ÄÂà∞angle‰∏ãËÆ°ÁÆó,Êñπ‰æøÂª∫Ê®°
 168:modules/motor/HTmotor/HT04.c ****             pid_ref = PIDCalculate(&motor->angle_PID, pid_measure * RAD_2_DEGREE, pid_ref);
 425              		.loc 1 168 13 is_stmt 1 view .LVU119
 426              		.loc 1 168 23 is_stmt 0 view .LVU120
 427 001c F0EE400A 		vmov.f32	s1, s0
 428 0020 9FED490A 		vldr.32	s0, .L40
 429              	.LVL41:
 430              		.loc 1 168 23 view .LVU121
 431 0024 27EE000A 		vmul.f32	s0, s14, s0
 432 0028 04F59470 		add	r0, r4, #296
 433 002c FFF7FEFF 		bl	PIDCalculate
 434              	.LVL42:
 435              		.loc 1 168 23 view .LVU122
 436 0030 43E0     		b	.L19
 437              	.LVL43:
 438              	.L35:
 164:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_angle_feedback_ptr;
 439              		.loc 1 164 17 is_stmt 1 view .LVU123
 164:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_angle_feedback_ptr;
 440              		.loc 1 164 37 is_stmt 0 view .LVU124
 441 0032 D4F8A031 		ldr	r3, [r4, #416]
 164:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_angle_feedback_ptr;
 442              		.loc 1 164 29 view .LVU125
 443 0036 93ED007A 		vldr.32	s14, [r3]
 444              	.LVL44:
 164:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_angle_feedback_ptr;
 445              		.loc 1 164 29 view .LVU126
 446 003a EFE7     		b	.L21
 447              	.LVL45:
 448              	.L38:
 169:modules/motor/HTmotor/HT04.c ****         }
 170:modules/motor/HTmotor/HT04.c **** 
 171:modules/motor/HTmotor/HT04.c ****         if ((setting->close_loop_type & SPEED_LOOP) && setting->outer_loop_type & (ANGLE_LOOP | SPE
 172:modules/motor/HTmotor/HT04.c ****         {
 173:modules/motor/HTmotor/HT04.c ****             if (setting->feedforward_flag & SPEED_FEEDFORWARD)
 174:modules/motor/HTmotor/HT04.c ****                 pid_ref += *motor->speed_feedforward_ptr;
 175:modules/motor/HTmotor/HT04.c **** 
 176:modules/motor/HTmotor/HT04.c ****             if (setting->angle_feedback_source == OTHER_FEED)
 177:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_speed_feedback_ptr;
 449              		.loc 1 177 17 is_stmt 1 view .LVU127
 450              		.loc 1 177 37 is_stmt 0 view .LVU128
 451 003c D4F8A431 		ldr	r3, [r4, #420]
 452              		.loc 1 177 29 view .LVU129
 453 0040 93ED007A 		vldr.32	s14, [r3]
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 13


 454              	.LVL46:
 455              		.loc 1 177 29 view .LVU130
 456 0044 54E0     		b	.L25
 457              	.LVL47:
 458              	.L39:
 178:modules/motor/HTmotor/HT04.c ****             else
 179:modules/motor/HTmotor/HT04.c ****                 pid_measure = measure->speed_rads;
 180:modules/motor/HTmotor/HT04.c ****             // measureÂçï‰ΩçÊòØrad / s ,refÊòØangle per sec,Áªü‰∏ÄÂà∞angle‰∏ãËÆ°ÁÆó
 181:modules/motor/HTmotor/HT04.c ****             pid_ref = PIDCalculate(&motor->speed_PID, pid_measure * RAD_2_DEGREE, pid_ref);
 182:modules/motor/HTmotor/HT04.c ****         }
 183:modules/motor/HTmotor/HT04.c **** 
 184:modules/motor/HTmotor/HT04.c ****         if (setting->feedforward_flag & CURRENT_FEEDFORWARD)
 185:modules/motor/HTmotor/HT04.c ****             pid_ref += *motor->current_feedforward_ptr;
 186:modules/motor/HTmotor/HT04.c ****         if (setting->close_loop_type & CURRENT_LOOP)
 187:modules/motor/HTmotor/HT04.c ****         {
 188:modules/motor/HTmotor/HT04.c ****             pid_ref = PIDCalculate(&motor->current_PID, measure->real_current, pid_ref);
 459              		.loc 1 188 13 is_stmt 1 view .LVU131
 460              		.loc 1 188 23 is_stmt 0 view .LVU132
 461 0046 F0EE400A 		vmov.f32	s1, s0
 462 004a 94ED080A 		vldr.32	s0, [r4, #32]
 463              	.LVL48:
 464              		.loc 1 188 23 view .LVU133
 465 004e 04F13800 		add	r0, r4, #56
 466 0052 FFF7FEFF 		bl	PIDCalculate
 467              	.LVL49:
 468              		.loc 1 188 23 view .LVU134
 469 0056 65E0     		b	.L27
 470              	.LVL50:
 471              	.L32:
 189:modules/motor/HTmotor/HT04.c ****         }
 190:modules/motor/HTmotor/HT04.c **** 
 191:modules/motor/HTmotor/HT04.c ****         set = pid_ref;
 192:modules/motor/HTmotor/HT04.c **** 
 193:modules/motor/HTmotor/HT04.c ****         LIMIT_MIN_MAX(set, T_MIN, T_MAX);
 472              		.loc 1 193 9 discriminator 1 view .LVU135
 473 0058 BBEE020A 		vmov.f32	s0, #-1.8e+1
 474              	.LVL51:
 475              	.L28:
 194:modules/motor/HTmotor/HT04.c ****         tmp = float_to_uint(set, T_MIN, T_MAX, 12);
 476              		.loc 1 194 9 is_stmt 1 view .LVU136
 477              		.loc 1 194 15 is_stmt 0 view .LVU137
 478 005c 0C20     		movs	r0, #12
 479 005e B3EE021A 		vmov.f32	s2, #1.8e+1
 480 0062 FBEE020A 		vmov.f32	s1, #-1.8e+1
 481 0066 FFF7FEFF 		bl	float_to_uint
 482              	.LVL52:
 195:modules/motor/HTmotor/HT04.c ****         if (motor->stop_flag == MOTOR_STOP)
 483              		.loc 1 195 9 is_stmt 1 view .LVU138
 484              		.loc 1 195 18 is_stmt 0 view .LVU139
 485 006a 94F8B431 		ldrb	r3, [r4, #436]	@ zero_extendqisi2
 486              		.loc 1 195 12 view .LVU140
 487 006e 43B9     		cbnz	r3, .L30
 196:modules/motor/HTmotor/HT04.c ****             tmp = float_to_uint(0, T_MIN, T_MAX, 12);
 488              		.loc 1 196 13 is_stmt 1 view .LVU141
 489              		.loc 1 196 19 is_stmt 0 view .LVU142
 490 0070 0C20     		movs	r0, #12
 491              	.LVL53:
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 14


 492              		.loc 1 196 19 view .LVU143
 493 0072 B3EE021A 		vmov.f32	s2, #1.8e+1
 494 0076 FBEE020A 		vmov.f32	s1, #-1.8e+1
 495 007a 9FED340A 		vldr.32	s0, .L40+4
 496 007e FFF7FEFF 		bl	float_to_uint
 497              	.LVL54:
 498              	.L30:
 197:modules/motor/HTmotor/HT04.c ****         motor_can->tx_buff[6] = (tmp >> 8);
 499              		.loc 1 197 9 is_stmt 1 view .LVU144
 500              		.loc 1 197 31 is_stmt 0 view .LVU145
 501 0082 030A     		lsrs	r3, r0, #8
 502 0084 85F82A30 		strb	r3, [r5, #42]
 198:modules/motor/HTmotor/HT04.c ****         motor_can->tx_buff[7] = tmp & 0xff;
 503              		.loc 1 198 9 is_stmt 1 view .LVU146
 504              		.loc 1 198 31 is_stmt 0 view .LVU147
 505 0088 85F82B00 		strb	r0, [r5, #43]
 199:modules/motor/HTmotor/HT04.c **** 
 200:modules/motor/HTmotor/HT04.c ****         CANTransmit(motor_can, 0.5);
 506              		.loc 1 200 9 is_stmt 1 view .LVU148
 507 008c B6EE000A 		vmov.f32	s0, #5.0e-1
 508 0090 2846     		mov	r0, r5
 509              	.LVL55:
 510              		.loc 1 200 9 is_stmt 0 view .LVU149
 511 0092 FFF7FEFF 		bl	CANTransmit
 512              	.LVL56:
 201:modules/motor/HTmotor/HT04.c **** 
 202:modules/motor/HTmotor/HT04.c ****         osDelay(1);
 513              		.loc 1 202 9 is_stmt 1 view .LVU150
 514 0096 0120     		movs	r0, #1
 515 0098 FFF7FEFF 		bl	osDelay
 516              	.LVL57:
 155:modules/motor/HTmotor/HT04.c ****     {
 517              		.loc 1 155 11 view .LVU151
 518              	.L31:
 153:modules/motor/HTmotor/HT04.c **** 
 519              		.loc 1 153 5 view .LVU152
 155:modules/motor/HTmotor/HT04.c ****     {
 520              		.loc 1 155 5 view .LVU153
 157:modules/motor/HTmotor/HT04.c ****         if (setting->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 521              		.loc 1 157 9 view .LVU154
 157:modules/motor/HTmotor/HT04.c ****         if (setting->motor_reverse_flag == MOTOR_DIRECTION_REVERSE)
 522              		.loc 1 157 17 is_stmt 0 view .LVU155
 523 009c 94ED6C0A 		vldr.32	s0, [r4, #432]
 524              	.LVL58:
 158:modules/motor/HTmotor/HT04.c ****             pid_ref *= -1;
 525              		.loc 1 158 9 is_stmt 1 view .LVU156
 158:modules/motor/HTmotor/HT04.c ****             pid_ref *= -1;
 526              		.loc 1 158 20 is_stmt 0 view .LVU157
 527 00a0 94F82E30 		ldrb	r3, [r4, #46]	@ zero_extendqisi2
 158:modules/motor/HTmotor/HT04.c ****             pid_ref *= -1;
 528              		.loc 1 158 12 view .LVU158
 529 00a4 012B     		cmp	r3, #1
 530 00a6 B0D0     		beq	.L36
 531              	.LVL59:
 532              	.L18:
 161:modules/motor/HTmotor/HT04.c ****         {
 533              		.loc 1 161 9 is_stmt 1 view .LVU159
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 15


 161:modules/motor/HTmotor/HT04.c ****         {
 534              		.loc 1 161 21 is_stmt 0 view .LVU160
 535 00a8 94F82D30 		ldrb	r3, [r4, #45]	@ zero_extendqisi2
 161:modules/motor/HTmotor/HT04.c ****         {
 536              		.loc 1 161 12 view .LVU161
 537 00ac 13F0040F 		tst	r3, #4
 538 00b0 03D0     		beq	.L19
 161:modules/motor/HTmotor/HT04.c ****         {
 539              		.loc 1 161 63 discriminator 1 view .LVU162
 540 00b2 94F82C30 		ldrb	r3, [r4, #44]	@ zero_extendqisi2
 161:modules/motor/HTmotor/HT04.c ****         {
 541              		.loc 1 161 53 discriminator 1 view .LVU163
 542 00b6 042B     		cmp	r3, #4
 543 00b8 AAD0     		beq	.L37
 544              	.LVL60:
 545              	.L19:
 171:modules/motor/HTmotor/HT04.c ****         {
 546              		.loc 1 171 9 is_stmt 1 view .LVU164
 171:modules/motor/HTmotor/HT04.c ****         {
 547              		.loc 1 171 21 is_stmt 0 view .LVU165
 548 00ba 94F82D30 		ldrb	r3, [r4, #45]	@ zero_extendqisi2
 171:modules/motor/HTmotor/HT04.c ****         {
 549              		.loc 1 171 12 view .LVU166
 550 00be 13F0020F 		tst	r3, #2
 551 00c2 1FD0     		beq	.L22
 171:modules/motor/HTmotor/HT04.c ****         {
 552              		.loc 1 171 63 discriminator 1 view .LVU167
 553 00c4 94F82C30 		ldrb	r3, [r4, #44]	@ zero_extendqisi2
 171:modules/motor/HTmotor/HT04.c ****         {
 554              		.loc 1 171 53 discriminator 1 view .LVU168
 555 00c8 13F0060F 		tst	r3, #6
 556 00cc 1AD0     		beq	.L22
 173:modules/motor/HTmotor/HT04.c ****                 pid_ref += *motor->speed_feedforward_ptr;
 557              		.loc 1 173 13 is_stmt 1 view .LVU169
 173:modules/motor/HTmotor/HT04.c ****                 pid_ref += *motor->speed_feedforward_ptr;
 558              		.loc 1 173 24 is_stmt 0 view .LVU170
 559 00ce 94F83230 		ldrb	r3, [r4, #50]	@ zero_extendqisi2
 173:modules/motor/HTmotor/HT04.c ****                 pid_ref += *motor->speed_feedforward_ptr;
 560              		.loc 1 173 16 view .LVU171
 561 00d2 13F0020F 		tst	r3, #2
 562 00d6 05D0     		beq	.L23
 174:modules/motor/HTmotor/HT04.c **** 
 563              		.loc 1 174 17 is_stmt 1 view .LVU172
 174:modules/motor/HTmotor/HT04.c **** 
 564              		.loc 1 174 34 is_stmt 0 view .LVU173
 565 00d8 D4F8A831 		ldr	r3, [r4, #424]
 174:modules/motor/HTmotor/HT04.c **** 
 566              		.loc 1 174 28 view .LVU174
 567 00dc D3ED007A 		vldr.32	s15, [r3]
 174:modules/motor/HTmotor/HT04.c **** 
 568              		.loc 1 174 25 view .LVU175
 569 00e0 30EE270A 		vadd.f32	s0, s0, s15
 570              	.LVL61:
 571              	.L23:
 176:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_speed_feedback_ptr;
 572              		.loc 1 176 13 is_stmt 1 view .LVU176
 176:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_speed_feedback_ptr;
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 16


 573              		.loc 1 176 24 is_stmt 0 view .LVU177
 574 00e4 94F83030 		ldrb	r3, [r4, #48]	@ zero_extendqisi2
 176:modules/motor/HTmotor/HT04.c ****                 pid_measure = *motor->other_speed_feedback_ptr;
 575              		.loc 1 176 16 view .LVU178
 576 00e8 012B     		cmp	r3, #1
 577 00ea A7D0     		beq	.L38
 179:modules/motor/HTmotor/HT04.c ****             // measureÂçï‰ΩçÊòØrad / s ,refÊòØangle per sec,Áªü‰∏ÄÂà∞angle‰∏ãËÆ°ÁÆó
 578              		.loc 1 179 17 is_stmt 1 view .LVU179
 179:modules/motor/HTmotor/HT04.c ****             // measureÂçï‰ΩçÊòØrad / s ,refÊòØangle per sec,Áªü‰∏ÄÂà∞angle‰∏ãËÆ°ÁÆó
 579              		.loc 1 179 29 is_stmt 0 view .LVU180
 580 00ec 94ED027A 		vldr.32	s14, [r4, #8]
 581              	.L25:
 582              	.LVL62:
 181:modules/motor/HTmotor/HT04.c ****         }
 583              		.loc 1 181 13 is_stmt 1 view .LVU181
 181:modules/motor/HTmotor/HT04.c ****         }
 584              		.loc 1 181 23 is_stmt 0 view .LVU182
 585 00f0 F0EE400A 		vmov.f32	s1, s0
 586 00f4 9FED140A 		vldr.32	s0, .L40
 587              	.LVL63:
 181:modules/motor/HTmotor/HT04.c ****         }
 588              		.loc 1 181 23 view .LVU183
 589 00f8 27EE000A 		vmul.f32	s0, s14, s0
 590 00fc 04F1B000 		add	r0, r4, #176
 591 0100 FFF7FEFF 		bl	PIDCalculate
 592              	.LVL64:
 593              	.L22:
 184:modules/motor/HTmotor/HT04.c ****             pid_ref += *motor->current_feedforward_ptr;
 594              		.loc 1 184 9 is_stmt 1 view .LVU184
 184:modules/motor/HTmotor/HT04.c ****             pid_ref += *motor->current_feedforward_ptr;
 595              		.loc 1 184 20 is_stmt 0 view .LVU185
 596 0104 94F83230 		ldrb	r3, [r4, #50]	@ zero_extendqisi2
 184:modules/motor/HTmotor/HT04.c ****             pid_ref += *motor->current_feedforward_ptr;
 597              		.loc 1 184 12 view .LVU186
 598 0108 13F0010F 		tst	r3, #1
 599 010c 05D0     		beq	.L26
 185:modules/motor/HTmotor/HT04.c ****         if (setting->close_loop_type & CURRENT_LOOP)
 600              		.loc 1 185 13 is_stmt 1 view .LVU187
 185:modules/motor/HTmotor/HT04.c ****         if (setting->close_loop_type & CURRENT_LOOP)
 601              		.loc 1 185 30 is_stmt 0 view .LVU188
 602 010e D4F8AC31 		ldr	r3, [r4, #428]
 185:modules/motor/HTmotor/HT04.c ****         if (setting->close_loop_type & CURRENT_LOOP)
 603              		.loc 1 185 24 view .LVU189
 604 0112 D3ED007A 		vldr.32	s15, [r3]
 185:modules/motor/HTmotor/HT04.c ****         if (setting->close_loop_type & CURRENT_LOOP)
 605              		.loc 1 185 21 view .LVU190
 606 0116 30EE270A 		vadd.f32	s0, s0, s15
 607              	.LVL65:
 608              	.L26:
 186:modules/motor/HTmotor/HT04.c ****         {
 609              		.loc 1 186 9 is_stmt 1 view .LVU191
 186:modules/motor/HTmotor/HT04.c ****         {
 610              		.loc 1 186 20 is_stmt 0 view .LVU192
 611 011a 94F82D30 		ldrb	r3, [r4, #45]	@ zero_extendqisi2
 186:modules/motor/HTmotor/HT04.c ****         {
 612              		.loc 1 186 12 view .LVU193
 613 011e 13F0010F 		tst	r3, #1
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 17


 614 0122 90D1     		bne	.L39
 615              	.LVL66:
 616              	.L27:
 191:modules/motor/HTmotor/HT04.c **** 
 617              		.loc 1 191 9 is_stmt 1 view .LVU194
 193:modules/motor/HTmotor/HT04.c ****         tmp = float_to_uint(set, T_MIN, T_MAX, 12);
 618              		.loc 1 193 9 view .LVU195
 619 0124 FBEE027A 		vmov.f32	s15, #-1.8e+1
 620 0128 B4EEE70A 		vcmpe.f32	s0, s15
 621 012c F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 622 0130 92D9     		bls	.L32
 193:modules/motor/HTmotor/HT04.c ****         tmp = float_to_uint(set, T_MIN, T_MAX, 12);
 623              		.loc 1 193 9 is_stmt 0 discriminator 2 view .LVU196
 624 0132 F3EE027A 		vmov.f32	s15, #1.8e+1
 625 0136 B4EEE70A 		vcmpe.f32	s0, s15
 626 013a F1EE10FA 		vmrs	APSR_nzcv, FPSCR
 627 013e 8DDB     		blt	.L28
 193:modules/motor/HTmotor/HT04.c ****         tmp = float_to_uint(set, T_MIN, T_MAX, 12);
 628              		.loc 1 193 9 discriminator 4 view .LVU197
 629 0140 B0EE670A 		vmov.f32	s0, s15
 630              	.LVL67:
 193:modules/motor/HTmotor/HT04.c ****         tmp = float_to_uint(set, T_MIN, T_MAX, 12);
 631              		.loc 1 193 9 discriminator 4 view .LVU198
 632 0144 8AE7     		b	.L28
 633              	.L41:
 634 0146 00BF     		.align	2
 635              	.L40:
 636 0148 E12E6542 		.word	1113927393
 637 014c 00000000 		.word	0
 638              		.cfi_endproc
 639              	.LFE284:
 641              		.section	.text.HTMotorCalibEncoder,"ax",%progbits
 642              		.align	1
 643              		.global	HTMotorCalibEncoder
 644              		.syntax unified
 645              		.thumb
 646              		.thumb_func
 648              	HTMotorCalibEncoder:
 649              	.LVL68:
 650              	.LFB281:
  80:modules/motor/HTmotor/HT04.c ****     uint16_t p, v, kp, kd, t;
 651              		.loc 1 80 1 is_stmt 1 view -0
 652              		.cfi_startproc
 653              		@ args = 0, pretend = 0, frame = 0
 654              		@ frame_needed = 0, uses_anonymous_args = 0
  80:modules/motor/HTmotor/HT04.c ****     uint16_t p, v, kp, kd, t;
 655              		.loc 1 80 1 is_stmt 0 view .LVU200
 656 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 657              	.LCFI4:
 658              		.cfi_def_cfa_offset 24
 659              		.cfi_offset 4, -24
 660              		.cfi_offset 5, -20
 661              		.cfi_offset 6, -16
 662              		.cfi_offset 7, -12
 663              		.cfi_offset 8, -8
 664              		.cfi_offset 14, -4
 665 0004 2DED028B 		vpush.64	{d8}
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 18


 666              	.LCFI5:
 667              		.cfi_def_cfa_offset 32
 668              		.cfi_offset 80, -32
 669              		.cfi_offset 81, -28
 670 0008 0446     		mov	r4, r0
  81:modules/motor/HTmotor/HT04.c ****     p = float_to_uint(0, P_MIN, P_MAX, 16);
 671              		.loc 1 81 5 is_stmt 1 view .LVU201
  82:modules/motor/HTmotor/HT04.c ****     v = float_to_uint(0, V_MIN, V_MAX, 12);
 672              		.loc 1 82 5 view .LVU202
  82:modules/motor/HTmotor/HT04.c ****     v = float_to_uint(0, V_MIN, V_MAX, 12);
 673              		.loc 1 82 9 is_stmt 0 view .LVU203
 674 000a 9FED368A 		vldr.32	s16, .L44
 675 000e 1020     		movs	r0, #16
 676              	.LVL69:
  82:modules/motor/HTmotor/HT04.c ****     v = float_to_uint(0, V_MIN, V_MAX, 12);
 677              		.loc 1 82 9 view .LVU204
 678 0010 9FED351A 		vldr.32	s2, .L44+4
 679 0014 DFED350A 		vldr.32	s1, .L44+8
 680 0018 B0EE480A 		vmov.f32	s0, s16
 681 001c FFF7FEFF 		bl	float_to_uint
 682              	.LVL70:
 683 0020 8046     		mov	r8, r0
 684              	.LVL71:
  83:modules/motor/HTmotor/HT04.c ****     kp = float_to_uint(0, KP_MIN, KP_MAX, 12);
 685              		.loc 1 83 5 is_stmt 1 view .LVU205
  83:modules/motor/HTmotor/HT04.c ****     kp = float_to_uint(0, KP_MIN, KP_MAX, 12);
 686              		.loc 1 83 9 is_stmt 0 view .LVU206
 687 0022 0C20     		movs	r0, #12
 688 0024 9FED321A 		vldr.32	s2, .L44+12
 689 0028 DFED320A 		vldr.32	s1, .L44+16
 690 002c B0EE480A 		vmov.f32	s0, s16
 691 0030 FFF7FEFF 		bl	float_to_uint
 692              	.LVL72:
 693 0034 0746     		mov	r7, r0
 694              	.LVL73:
  84:modules/motor/HTmotor/HT04.c ****     kd = float_to_uint(0, KD_MIN, KD_MAX, 12);
 695              		.loc 1 84 5 is_stmt 1 view .LVU207
  84:modules/motor/HTmotor/HT04.c ****     kd = float_to_uint(0, KD_MIN, KD_MAX, 12);
 696              		.loc 1 84 10 is_stmt 0 view .LVU208
 697 0036 0C20     		movs	r0, #12
 698 0038 9FED2F1A 		vldr.32	s2, .L44+20
 699 003c F0EE480A 		vmov.f32	s1, s16
 700 0040 B0EE480A 		vmov.f32	s0, s16
 701 0044 FFF7FEFF 		bl	float_to_uint
 702              	.LVL74:
 703 0048 0646     		mov	r6, r0
 704              	.LVL75:
  85:modules/motor/HTmotor/HT04.c ****     t = float_to_uint(0, T_MIN, T_MAX, 12);
 705              		.loc 1 85 5 is_stmt 1 view .LVU209
  85:modules/motor/HTmotor/HT04.c ****     t = float_to_uint(0, T_MIN, T_MAX, 12);
 706              		.loc 1 85 10 is_stmt 0 view .LVU210
 707 004a 0C20     		movs	r0, #12
 708 004c B1EE041A 		vmov.f32	s2, #5.0e+0
 709 0050 F0EE480A 		vmov.f32	s1, s16
 710 0054 B0EE480A 		vmov.f32	s0, s16
 711 0058 FFF7FEFF 		bl	float_to_uint
 712              	.LVL76:
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 19


 713 005c 0546     		mov	r5, r0
 714              	.LVL77:
  86:modules/motor/HTmotor/HT04.c **** 
 715              		.loc 1 86 5 is_stmt 1 view .LVU211
  86:modules/motor/HTmotor/HT04.c **** 
 716              		.loc 1 86 9 is_stmt 0 view .LVU212
 717 005e 0C20     		movs	r0, #12
 718 0060 B3EE021A 		vmov.f32	s2, #1.8e+1
 719 0064 FBEE020A 		vmov.f32	s1, #-1.8e+1
 720 0068 B0EE480A 		vmov.f32	s0, s16
 721 006c FFF7FEFF 		bl	float_to_uint
 722              	.LVL78:
  88:modules/motor/HTmotor/HT04.c ****     buf[0] = p >> 8;
 723              		.loc 1 88 5 is_stmt 1 view .LVU213
  88:modules/motor/HTmotor/HT04.c ****     buf[0] = p >> 8;
 724              		.loc 1 88 25 is_stmt 0 view .LVU214
 725 0070 D4F8B831 		ldr	r3, [r4, #440]
 726              	.LVL79:
  89:modules/motor/HTmotor/HT04.c ****     buf[1] = p & 0xFF;
 727              		.loc 1 89 5 is_stmt 1 view .LVU215
  89:modules/motor/HTmotor/HT04.c ****     buf[1] = p & 0xFF;
 728              		.loc 1 89 12 is_stmt 0 view .LVU216
 729 0074 4FEA1821 		lsr	r1, r8, #8
 730 0078 83F82410 		strb	r1, [r3, #36]
  90:modules/motor/HTmotor/HT04.c ****     buf[2] = v >> 4;
 731              		.loc 1 90 5 is_stmt 1 view .LVU217
  90:modules/motor/HTmotor/HT04.c ****     buf[2] = v >> 4;
 732              		.loc 1 90 12 is_stmt 0 view .LVU218
 733 007c 83F82580 		strb	r8, [r3, #37]
  91:modules/motor/HTmotor/HT04.c ****     buf[3] = ((v & 0xF) << 4) | (kp >> 8);
 734              		.loc 1 91 5 is_stmt 1 view .LVU219
  91:modules/motor/HTmotor/HT04.c ****     buf[3] = ((v & 0xF) << 4) | (kp >> 8);
 735              		.loc 1 91 12 is_stmt 0 view .LVU220
 736 0080 3909     		lsrs	r1, r7, #4
 737 0082 83F82610 		strb	r1, [r3, #38]
  92:modules/motor/HTmotor/HT04.c ****     buf[4] = kp & 0xFF;
 738              		.loc 1 92 5 is_stmt 1 view .LVU221
  92:modules/motor/HTmotor/HT04.c ****     buf[4] = kp & 0xFF;
 739              		.loc 1 92 31 is_stmt 0 view .LVU222
 740 0086 310A     		lsrs	r1, r6, #8
 741 0088 41EA0711 		orr	r1, r1, r7, lsl #4
  92:modules/motor/HTmotor/HT04.c ****     buf[4] = kp & 0xFF;
 742              		.loc 1 92 12 view .LVU223
 743 008c 83F82710 		strb	r1, [r3, #39]
  93:modules/motor/HTmotor/HT04.c ****     buf[5] = kd >> 4;
 744              		.loc 1 93 5 is_stmt 1 view .LVU224
  93:modules/motor/HTmotor/HT04.c ****     buf[5] = kd >> 4;
 745              		.loc 1 93 12 is_stmt 0 view .LVU225
 746 0090 83F82860 		strb	r6, [r3, #40]
  94:modules/motor/HTmotor/HT04.c ****     buf[6] = ((kd & 0xF) << 4) | (t >> 8);
 747              		.loc 1 94 5 is_stmt 1 view .LVU226
  94:modules/motor/HTmotor/HT04.c ****     buf[6] = ((kd & 0xF) << 4) | (t >> 8);
 748              		.loc 1 94 12 is_stmt 0 view .LVU227
 749 0094 2909     		lsrs	r1, r5, #4
 750 0096 83F82910 		strb	r1, [r3, #41]
  95:modules/motor/HTmotor/HT04.c ****     buf[7] = t & 0xff;
 751              		.loc 1 95 5 is_stmt 1 view .LVU228
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 20


  95:modules/motor/HTmotor/HT04.c ****     buf[7] = t & 0xff;
 752              		.loc 1 95 32 is_stmt 0 view .LVU229
 753 009a 010A     		lsrs	r1, r0, #8
 754 009c 41EA0511 		orr	r1, r1, r5, lsl #4
  95:modules/motor/HTmotor/HT04.c ****     buf[7] = t & 0xff;
 755              		.loc 1 95 12 view .LVU230
 756 00a0 83F82A10 		strb	r1, [r3, #42]
  96:modules/motor/HTmotor/HT04.c ****     memcpy(zero_buff, buf, 6); // ÂàùÂßãÂåñÁöÑÊó∂ÂÄôËá≥Â∞ëË∞ÉÁî®‰∏ÄÊ¨°,ÊïÖÂ∞ÜÂÖ∂‰ªñÊåá‰ª§‰∏∫0Êó∂Âèë
 757              		.loc 1 96 5 is_stmt 1 view .LVU231
  96:modules/motor/HTmotor/HT04.c ****     memcpy(zero_buff, buf, 6); // ÂàùÂßãÂåñÁöÑÊó∂ÂÄôËá≥Â∞ëË∞ÉÁî®‰∏ÄÊ¨°,ÊïÖÂ∞ÜÂÖ∂‰ªñÊåá‰ª§‰∏∫0Êó∂Âèë
 758              		.loc 1 96 12 is_stmt 0 view .LVU232
 759 00a4 83F82B00 		strb	r0, [r3, #43]
  97:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 760              		.loc 1 97 5 is_stmt 1 view .LVU233
 761 00a8 144A     		ldr	r2, .L44+24
 762 00aa 586A     		ldr	r0, [r3, #36]	@ unaligned
 763              	.LVL80:
  97:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 764              		.loc 1 97 5 is_stmt 0 view .LVU234
 765 00ac 1060     		str	r0, [r2]
 766 00ae 1B8D     		ldrh	r3, [r3, #40]	@ unaligned
 767              	.LVL81:
  97:modules/motor/HTmotor/HT04.c ****     CANTransmit(motor->motor_can_instace, 1);
 768              		.loc 1 97 5 view .LVU235
 769 00b0 9380     		strh	r3, [r2, #4]	@ unaligned
  98:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.005);
 770              		.loc 1 98 5 is_stmt 1 view .LVU236
 771 00b2 B7EE000A 		vmov.f32	s0, #1.0e+0
 772 00b6 D4F8B801 		ldr	r0, [r4, #440]
 773 00ba FFF7FEFF 		bl	CANTransmit
 774              	.LVL82:
  99:modules/motor/HTmotor/HT04.c ****     HTMotorSetMode(CMD_ZERO_POSITION, motor); // sb Áé©ÊÑèÊ†°ÂáÜÂÆå‰∫ÜÁºñÁ†ÅÂô®‰πü‰∏ç‰∏∫0
 775              		.loc 1 99 5 view .LVU237
 776 00be 9FED108A 		vldr.32	s16, .L44+28
 777 00c2 B0EE480A 		vmov.f32	s0, s16
 778 00c6 FFF7FEFF 		bl	DWT_Delay
 779              	.LVL83:
 100:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.005);
 780              		.loc 1 100 5 view .LVU238
 781 00ca 2146     		mov	r1, r4
 782 00cc FE20     		movs	r0, #254
 783 00ce FFF7FEFF 		bl	HTMotorSetMode
 784              	.LVL84:
 101:modules/motor/HTmotor/HT04.c ****     // HTMotorSetMode(CMD_MOTOR_MODE, motor);
 785              		.loc 1 101 5 view .LVU239
 786 00d2 B0EE480A 		vmov.f32	s0, s16
 787 00d6 FFF7FEFF 		bl	DWT_Delay
 788              	.LVL85:
 103:modules/motor/HTmotor/HT04.c **** 
 789              		.loc 1 103 1 is_stmt 0 view .LVU240
 790 00da BDEC028B 		vldm	sp!, {d8}
 791              	.LCFI6:
 792              		.cfi_restore 80
 793              		.cfi_restore 81
 794              		.cfi_def_cfa_offset 24
 795 00de BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 796              	.LVL86:
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 21


 797              	.L45:
 103:modules/motor/HTmotor/HT04.c **** 
 798              		.loc 1 103 1 view .LVU241
 799 00e2 00BF     		.align	2
 800              	.L44:
 801 00e4 00000000 		.word	0
 802 00e8 0000BF42 		.word	1119813632
 803 00ec 0000BFC2 		.word	-1027670016
 804 00f0 00003442 		.word	1110704128
 805 00f4 000034C2 		.word	-1036779520
 806 00f8 0000FA43 		.word	1140457472
 807 00fc 00000000 		.word	zero_buff
 808 0100 0AD7A33B 		.word	1000593162
 809              		.cfi_endproc
 810              	.LFE281:
 812              		.section	.text.HTMotorSetRef,"ax",%progbits
 813              		.align	1
 814              		.global	HTMotorSetRef
 815              		.syntax unified
 816              		.thumb
 817              		.thumb_func
 819              	HTMotorSetRef:
 820              	.LVL87:
 821              	.LFB283:
 138:modules/motor/HTmotor/HT04.c ****     motor->pid_ref = ref;
 822              		.loc 1 138 1 is_stmt 1 view -0
 823              		.cfi_startproc
 824              		@ args = 0, pretend = 0, frame = 0
 825              		@ frame_needed = 0, uses_anonymous_args = 0
 826              		@ link register save eliminated.
 139:modules/motor/HTmotor/HT04.c **** }
 827              		.loc 1 139 5 view .LVU243
 139:modules/motor/HTmotor/HT04.c **** }
 828              		.loc 1 139 20 is_stmt 0 view .LVU244
 829 0000 80ED6C0A 		vstr.32	s0, [r0, #432]
 140:modules/motor/HTmotor/HT04.c **** 
 830              		.loc 1 140 1 view .LVU245
 831 0004 7047     		bx	lr
 832              		.cfi_endproc
 833              	.LFE283:
 835              		.section	.text.HTMotorControlInit,"ax",%progbits
 836              		.align	1
 837              		.global	HTMotorControlInit
 838              		.syntax unified
 839              		.thumb
 840              		.thumb_func
 842              	HTMotorControlInit:
 843              	.LFB285:
 203:modules/motor/HTmotor/HT04.c ****     }
 204:modules/motor/HTmotor/HT04.c **** }
 205:modules/motor/HTmotor/HT04.c **** 
 206:modules/motor/HTmotor/HT04.c **** void HTMotorControlInit()
 207:modules/motor/HTmotor/HT04.c **** {
 844              		.loc 1 207 1 is_stmt 1 view -0
 845              		.cfi_startproc
 846              		@ args = 0, pretend = 0, frame = 40
 847              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 22


 848 0000 30B5     		push	{r4, r5, lr}
 849              	.LCFI7:
 850              		.cfi_def_cfa_offset 12
 851              		.cfi_offset 4, -12
 852              		.cfi_offset 5, -8
 853              		.cfi_offset 14, -4
 854 0002 8BB0     		sub	sp, sp, #44
 855              	.LCFI8:
 856              		.cfi_def_cfa_offset 56
 208:modules/motor/HTmotor/HT04.c ****     char ht_task_name[5] = "ht";
 857              		.loc 1 208 5 view .LVU247
 858              		.loc 1 208 10 is_stmt 0 view .LVU248
 859 0004 47F26843 		movw	r3, #29800
 860 0008 0893     		str	r3, [sp, #32]
 861 000a 0023     		movs	r3, #0
 862 000c 8DF82430 		strb	r3, [sp, #36]
 209:modules/motor/HTmotor/HT04.c ****     // ÈÅçÂéÜÊâÄÊúâÁîµÊú∫ÂÆû‰æã,ÂàõÂª∫‰ªªÂä°
 210:modules/motor/HTmotor/HT04.c ****     if (!idx)
 863              		.loc 1 210 5 is_stmt 1 view .LVU249
 864              		.loc 1 210 9 is_stmt 0 view .LVU250
 865 0010 154B     		ldr	r3, .L53
 866 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 867              		.loc 1 210 8 view .LVU251
 868 0014 2BB3     		cbz	r3, .L47
 869              	.LBB2:
 211:modules/motor/HTmotor/HT04.c ****         return;
 212:modules/motor/HTmotor/HT04.c ****     for (size_t i = 0; i < idx; i++)
 870              		.loc 1 212 17 view .LVU252
 871 0016 0025     		movs	r5, #0
 872 0018 1FE0     		b	.L48
 873              	.LVL88:
 874              	.L50:
 875              	.LBB3:
 213:modules/motor/HTmotor/HT04.c ****     {
 214:modules/motor/HTmotor/HT04.c ****         char ht_id_buff[2] = {0};
 876              		.loc 1 214 9 is_stmt 1 view .LVU253
 877              		.loc 1 214 14 is_stmt 0 view .LVU254
 878 001a 0023     		movs	r3, #0
 879 001c ADF80030 		strh	r3, [sp]	@ movhi
 215:modules/motor/HTmotor/HT04.c ****         __itoa(i, ht_id_buff, 10);
 880              		.loc 1 215 9 is_stmt 1 view .LVU255
 881 0020 0A22     		movs	r2, #10
 882 0022 6946     		mov	r1, sp
 883 0024 2846     		mov	r0, r5
 884 0026 FFF7FEFF 		bl	__itoa
 885              	.LVL89:
 216:modules/motor/HTmotor/HT04.c ****         strcat(ht_task_name, ht_id_buff); // ‰ºº‰πéÊ≤°‰ªÄ‰πàÂêäÁî®,osthreaddef‰ºöÊääÁ¨¨‰∏Ä‰∏™ÂèòÈáè
 886              		.loc 1 216 9 view .LVU256
 887 002a 6946     		mov	r1, sp
 888 002c 08A8     		add	r0, sp, #32
 889 002e FFF7FEFF 		bl	strcat
 890              	.LVL90:
 217:modules/motor/HTmotor/HT04.c ****         // @todo ËøòÈúÄË¶Å‰∏Ä‰∏™Êõ¥‰ºòÈõÖÁöÑÊñπÊ°àÊù•Âå∫ÂàÜ‰∏çÂêåÁöÑÁîµÊú∫‰ªªÂä°
 218:modules/motor/HTmotor/HT04.c ****         osThreadDef(ht_task_name, HTMotorTask, osPriorityNormal, 0, 128);
 891              		.loc 1 218 9 view .LVU257
 892 0032 0DF1040C 		add	ip, sp, #4
 893 0036 0D4C     		ldr	r4, .L53+4
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 23


 894 0038 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 895 003a ACE80F00 		stmia	ip!, {r0, r1, r2, r3}
 896 003e 94E80700 		ldm	r4, {r0, r1, r2}
 897 0042 8CE80700 		stm	ip, {r0, r1, r2}
 219:modules/motor/HTmotor/HT04.c ****         ht_task_handle[i] = osThreadCreate(osThread(ht_task_name), ht_motor_instance[i]);
 898              		.loc 1 219 9 view .LVU258
 899              		.loc 1 219 29 is_stmt 0 view .LVU259
 900 0046 0A4B     		ldr	r3, .L53+8
 901 0048 53F82510 		ldr	r1, [r3, r5, lsl #2]
 902 004c 01A8     		add	r0, sp, #4
 903 004e FFF7FEFF 		bl	osThreadCreate
 904              	.LVL91:
 905              		.loc 1 219 27 discriminator 1 view .LVU260
 906 0052 084B     		ldr	r3, .L53+12
 907 0054 43F82500 		str	r0, [r3, r5, lsl #2]
 908              	.LBE3:
 212:modules/motor/HTmotor/HT04.c ****     {
 909              		.loc 1 212 34 is_stmt 1 discriminator 3 view .LVU261
 910 0058 0135     		adds	r5, r5, #1
 911              	.LVL92:
 912              	.L48:
 212:modules/motor/HTmotor/HT04.c ****     {
 913              		.loc 1 212 26 discriminator 1 view .LVU262
 914 005a 034B     		ldr	r3, .L53
 915 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 916 005e AB42     		cmp	r3, r5
 917 0060 DBD8     		bhi	.L50
 918              	.LVL93:
 919              	.L47:
 212:modules/motor/HTmotor/HT04.c ****     {
 920              		.loc 1 212 26 is_stmt 0 discriminator 1 view .LVU263
 921              	.LBE2:
 220:modules/motor/HTmotor/HT04.c ****     }
 221:modules/motor/HTmotor/HT04.c **** }
 922              		.loc 1 221 1 view .LVU264
 923 0062 0BB0     		add	sp, sp, #44
 924              	.LCFI9:
 925              		.cfi_def_cfa_offset 12
 926              		@ sp needed
 927 0064 30BD     		pop	{r4, r5, pc}
 928              	.L54:
 929 0066 00BF     		.align	2
 930              	.L53:
 931 0068 00000000 		.word	idx
 932 006c 00000000 		.word	.LANCHOR0
 933 0070 00000000 		.word	ht_motor_instance
 934 0074 00000000 		.word	ht_task_handle
 935              		.cfi_endproc
 936              	.LFE285:
 938              		.section	.text.HTMotorStop,"ax",%progbits
 939              		.align	1
 940              		.global	HTMotorStop
 941              		.syntax unified
 942              		.thumb
 943              		.thumb_func
 945              	HTMotorStop:
 946              	.LVL94:
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 24


 947              	.LFB286:
 222:modules/motor/HTmotor/HT04.c **** 
 223:modules/motor/HTmotor/HT04.c **** void HTMotorStop(HTMotorInstance *motor)
 224:modules/motor/HTmotor/HT04.c **** {
 948              		.loc 1 224 1 is_stmt 1 view -0
 949              		.cfi_startproc
 950              		@ args = 0, pretend = 0, frame = 0
 951              		@ frame_needed = 0, uses_anonymous_args = 0
 952              		@ link register save eliminated.
 225:modules/motor/HTmotor/HT04.c ****     motor->stop_flag = MOTOR_STOP;
 953              		.loc 1 225 5 view .LVU266
 954              		.loc 1 225 22 is_stmt 0 view .LVU267
 955 0000 0023     		movs	r3, #0
 956 0002 80F8B431 		strb	r3, [r0, #436]
 226:modules/motor/HTmotor/HT04.c **** }
 957              		.loc 1 226 1 view .LVU268
 958 0006 7047     		bx	lr
 959              		.cfi_endproc
 960              	.LFE286:
 962              		.section	.text.HTMotorEnable,"ax",%progbits
 963              		.align	1
 964              		.global	HTMotorEnable
 965              		.syntax unified
 966              		.thumb
 967              		.thumb_func
 969              	HTMotorEnable:
 970              	.LVL95:
 971              	.LFB287:
 227:modules/motor/HTmotor/HT04.c **** 
 228:modules/motor/HTmotor/HT04.c **** void HTMotorEnable(HTMotorInstance *motor)
 229:modules/motor/HTmotor/HT04.c **** {
 972              		.loc 1 229 1 is_stmt 1 view -0
 973              		.cfi_startproc
 974              		@ args = 0, pretend = 0, frame = 0
 975              		@ frame_needed = 0, uses_anonymous_args = 0
 976              		@ link register save eliminated.
 230:modules/motor/HTmotor/HT04.c ****     motor->stop_flag = MOTOR_ENALBED;
 977              		.loc 1 230 5 view .LVU270
 978              		.loc 1 230 22 is_stmt 0 view .LVU271
 979 0000 0123     		movs	r3, #1
 980 0002 80F8B431 		strb	r3, [r0, #436]
 231:modules/motor/HTmotor/HT04.c **** }
 981              		.loc 1 231 1 view .LVU272
 982 0006 7047     		bx	lr
 983              		.cfi_endproc
 984              	.LFE287:
 986              		.section	.text.HTMotorInit,"ax",%progbits
 987              		.align	1
 988              		.global	HTMotorInit
 989              		.syntax unified
 990              		.thumb
 991              		.thumb_func
 993              	HTMotorInit:
 994              	.LVL96:
 995              	.LFB282:
 106:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)malloc(sizeof(HTMotorInstance));
 996              		.loc 1 106 1 is_stmt 1 view -0
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 25


 997              		.cfi_startproc
 998              		@ args = 0, pretend = 0, frame = 16
 999              		@ frame_needed = 0, uses_anonymous_args = 0
 106:modules/motor/HTmotor/HT04.c ****     HTMotorInstance *motor = (HTMotorInstance *)malloc(sizeof(HTMotorInstance));
 1000              		.loc 1 106 1 is_stmt 0 view .LVU274
 1001 0000 30B5     		push	{r4, r5, lr}
 1002              	.LCFI10:
 1003              		.cfi_def_cfa_offset 12
 1004              		.cfi_offset 4, -12
 1005              		.cfi_offset 5, -8
 1006              		.cfi_offset 14, -4
 1007 0002 2DED028B 		vpush.64	{d8}
 1008              	.LCFI11:
 1009              		.cfi_def_cfa_offset 20
 1010              		.cfi_offset 80, -20
 1011              		.cfi_offset 81, -16
 1012 0006 85B0     		sub	sp, sp, #20
 1013              	.LCFI12:
 1014              		.cfi_def_cfa_offset 40
 1015 0008 0546     		mov	r5, r0
 107:modules/motor/HTmotor/HT04.c ****     memset(motor, 0, sizeof(HTMotorInstance));
 1016              		.loc 1 107 5 is_stmt 1 view .LVU275
 107:modules/motor/HTmotor/HT04.c ****     memset(motor, 0, sizeof(HTMotorInstance));
 1017              		.loc 1 107 49 is_stmt 0 view .LVU276
 1018 000a 4FF4E470 		mov	r0, #456
 1019              	.LVL97:
 107:modules/motor/HTmotor/HT04.c ****     memset(motor, 0, sizeof(HTMotorInstance));
 1020              		.loc 1 107 49 view .LVU277
 1021 000e FFF7FEFF 		bl	malloc
 1022              	.LVL98:
 1023 0012 0446     		mov	r4, r0
 1024              	.LVL99:
 108:modules/motor/HTmotor/HT04.c **** 
 1025              		.loc 1 108 5 is_stmt 1 view .LVU278
 1026 0014 4FF4E472 		mov	r2, #456
 1027 0018 0021     		movs	r1, #0
 1028 001a FFF7FEFF 		bl	memset
 1029              	.LVL100:
 110:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
 1030              		.loc 1 110 5 view .LVU279
 110:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->current_PID, &config->controller_param_init_config.current_PID);
 1031              		.loc 1 110 27 is_stmt 0 view .LVU280
 1032 001e 05F19403 		add	r3, r5, #148
 1033 0022 93E80300 		ldm	r3, {r0, r1}
 1034 0026 E062     		str	r0, [r4, #44]
 1035 0028 2186     		strh	r1, [r4, #48]	@ movhi
 1036 002a 090C     		lsrs	r1, r1, #16
 1037 002c 84F83210 		strb	r1, [r4, #50]
 111:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->speed_PID, &config->controller_param_init_config.speed_PID);
 1038              		.loc 1 111 5 is_stmt 1 view .LVU281
 1039 0030 05F11001 		add	r1, r5, #16
 1040 0034 04F13800 		add	r0, r4, #56
 1041 0038 FFF7FEFF 		bl	PIDInit
 1042              	.LVL101:
 112:modules/motor/HTmotor/HT04.c ****     PIDInit(&motor->angle_PID, &config->controller_param_init_config.angle_PID);
 1043              		.loc 1 112 5 view .LVU282
 1044 003c 05F13C01 		add	r1, r5, #60
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 26


 1045 0040 04F1B000 		add	r0, r4, #176
 1046 0044 FFF7FEFF 		bl	PIDInit
 1047              	.LVL102:
 113:modules/motor/HTmotor/HT04.c ****     motor->other_angle_feedback_ptr = config->controller_param_init_config.other_angle_feedback_ptr
 1048              		.loc 1 113 5 view .LVU283
 1049 0048 05F16801 		add	r1, r5, #104
 1050 004c 04F59470 		add	r0, r4, #296
 1051 0050 FFF7FEFF 		bl	PIDInit
 1052              	.LVL103:
 114:modules/motor/HTmotor/HT04.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 1053              		.loc 1 114 5 view .LVU284
 114:modules/motor/HTmotor/HT04.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 1054              		.loc 1 114 75 is_stmt 0 view .LVU285
 1055 0054 2B68     		ldr	r3, [r5]
 114:modules/motor/HTmotor/HT04.c ****     motor->other_speed_feedback_ptr = config->controller_param_init_config.other_speed_feedback_ptr
 1056              		.loc 1 114 37 view .LVU286
 1057 0056 C4F8A031 		str	r3, [r4, #416]
 115:modules/motor/HTmotor/HT04.c **** 
 1058              		.loc 1 115 5 is_stmt 1 view .LVU287
 115:modules/motor/HTmotor/HT04.c **** 
 1059              		.loc 1 115 75 is_stmt 0 view .LVU288
 1060 005a 6B68     		ldr	r3, [r5, #4]
 115:modules/motor/HTmotor/HT04.c **** 
 1061              		.loc 1 115 37 view .LVU289
 1062 005c C4F8A431 		str	r3, [r4, #420]
 117:modules/motor/HTmotor/HT04.c ****     config->can_init_config.id = motor;
 1063              		.loc 1 117 5 is_stmt 1 view .LVU290
 117:modules/motor/HTmotor/HT04.c ****     config->can_init_config.id = motor;
 1064              		.loc 1 117 49 is_stmt 0 view .LVU291
 1065 0060 1C4B     		ldr	r3, .L59
 1066 0062 C5F8A830 		str	r3, [r5, #168]
 118:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
 1067              		.loc 1 118 5 is_stmt 1 view .LVU292
 118:modules/motor/HTmotor/HT04.c ****     motor->motor_can_instace = CANRegister(&config->can_init_config);
 1068              		.loc 1 118 32 is_stmt 0 view .LVU293
 1069 0066 C5F8AC40 		str	r4, [r5, #172]
 119:modules/motor/HTmotor/HT04.c **** 
 1070              		.loc 1 119 5 is_stmt 1 view .LVU294
 119:modules/motor/HTmotor/HT04.c **** 
 1071              		.loc 1 119 32 is_stmt 0 view .LVU295
 1072 006a 05F19C00 		add	r0, r5, #156
 1073 006e FFF7FEFF 		bl	CANRegister
 1074              	.LVL104:
 119:modules/motor/HTmotor/HT04.c **** 
 1075              		.loc 1 119 30 discriminator 1 view .LVU296
 1076 0072 C4F8B801 		str	r0, [r4, #440]
 121:modules/motor/HTmotor/HT04.c ****         .callback = HTMotorLostCallback,
 1077              		.loc 1 121 5 is_stmt 1 view .LVU297
 121:modules/motor/HTmotor/HT04.c ****         .callback = HTMotorLostCallback,
 1078              		.loc 1 121 26 is_stmt 0 view .LVU298
 1079 0076 01A8     		add	r0, sp, #4
 1080 0078 0023     		movs	r3, #0
 1081 007a 0193     		str	r3, [sp, #4]
 1082 007c 4360     		str	r3, [r0, #4]
 1083 007e 8360     		str	r3, [r0, #8]
 1084 0080 0523     		movs	r3, #5
 1085 0082 ADF80430 		strh	r3, [sp, #4]	@ movhi
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 27


 1086 0086 144B     		ldr	r3, .L59+4
 1087 0088 0293     		str	r3, [sp, #8]
 1088 008a 0394     		str	r4, [sp, #12]
 126:modules/motor/HTmotor/HT04.c **** 
 1089              		.loc 1 126 5 is_stmt 1 view .LVU299
 126:modules/motor/HTmotor/HT04.c **** 
 1090              		.loc 1 126 27 is_stmt 0 view .LVU300
 1091 008c FFF7FEFF 		bl	DaemonRegister
 1092              	.LVL105:
 126:modules/motor/HTmotor/HT04.c **** 
 1093              		.loc 1 126 25 discriminator 1 view .LVU301
 1094 0090 C4F8BC01 		str	r0, [r4, #444]
 128:modules/motor/HTmotor/HT04.c ****     HTMotorSetMode(CMD_MOTOR_MODE, motor); // Á°Æ‰øùÁîµÊú∫Â∑≤Áªè‰∏äÁîµÂπ∂ÊâßË°åÁîµÊú∫Ê®°Âºè
 1095              		.loc 1 128 5 is_stmt 1 view .LVU302
 1096 0094 2046     		mov	r0, r4
 1097 0096 FFF7FEFF 		bl	HTMotorEnable
 1098              	.LVL106:
 129:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.05f);
 1099              		.loc 1 129 5 view .LVU303
 1100 009a 2146     		mov	r1, r4
 1101 009c FC20     		movs	r0, #252
 1102 009e FFF7FEFF 		bl	HTMotorSetMode
 1103              	.LVL107:
 130:modules/motor/HTmotor/HT04.c ****     HTMotorCalibEncoder(motor); // Â∞ÜÂΩìÂâçÁºñÁ†ÅÂô®‰ΩçÁΩÆ‰Ωú‰∏∫Èõ∂‰Ωç
 1104              		.loc 1 130 5 view .LVU304
 1105 00a2 9FED0E8A 		vldr.32	s16, .L59+8
 1106 00a6 B0EE480A 		vmov.f32	s0, s16
 1107 00aa FFF7FEFF 		bl	DWT_Delay
 1108              	.LVL108:
 131:modules/motor/HTmotor/HT04.c ****     DWT_Delay(0.05f);           // ‰øùËØÅ‰∏ã‰∏Ä‰∏™ÁîµÊú∫ÂèëÈÄÅÊó∂CANÊòØÁ©∫Èó≤ÁöÑ,Ê≥®ÊÑèÂ∫îÁî®Âú®Âàù
 1109              		.loc 1 131 5 view .LVU305
 1110 00ae 2046     		mov	r0, r4
 1111 00b0 FFF7FEFF 		bl	HTMotorCalibEncoder
 1112              	.LVL109:
 132:modules/motor/HTmotor/HT04.c ****     ht_motor_instance[idx++] = motor;
 1113              		.loc 1 132 5 view .LVU306
 1114 00b4 B0EE480A 		vmov.f32	s0, s16
 1115 00b8 FFF7FEFF 		bl	DWT_Delay
 1116              	.LVL110:
 133:modules/motor/HTmotor/HT04.c ****     return motor;
 1117              		.loc 1 133 5 view .LVU307
 133:modules/motor/HTmotor/HT04.c ****     return motor;
 1118              		.loc 1 133 26 is_stmt 0 view .LVU308
 1119 00bc 084A     		ldr	r2, .L59+12
 1120 00be 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1121 00c0 591C     		adds	r1, r3, #1
 1122 00c2 1170     		strb	r1, [r2]
 133:modules/motor/HTmotor/HT04.c ****     return motor;
 1123              		.loc 1 133 30 view .LVU309
 1124 00c4 074A     		ldr	r2, .L59+16
 1125 00c6 42F82340 		str	r4, [r2, r3, lsl #2]
 134:modules/motor/HTmotor/HT04.c **** }
 1126              		.loc 1 134 5 is_stmt 1 view .LVU310
 135:modules/motor/HTmotor/HT04.c **** 
 1127              		.loc 1 135 1 is_stmt 0 view .LVU311
 1128 00ca 2046     		mov	r0, r4
 1129 00cc 05B0     		add	sp, sp, #20
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 28


 1130              	.LCFI13:
 1131              		.cfi_def_cfa_offset 20
 1132              		@ sp needed
 1133 00ce BDEC028B 		vldm	sp!, {d8}
 1134              	.LCFI14:
 1135              		.cfi_restore 80
 1136              		.cfi_restore 81
 1137              		.cfi_def_cfa_offset 12
 1138 00d2 30BD     		pop	{r4, r5, pc}
 1139              	.LVL111:
 1140              	.L60:
 135:modules/motor/HTmotor/HT04.c **** 
 1141              		.loc 1 135 1 view .LVU312
 1142              		.align	2
 1143              	.L59:
 1144 00d4 00000000 		.word	HTMotorDecode
 1145 00d8 00000000 		.word	HTMotorLostCallback
 1146 00dc CDCC4C3D 		.word	1028443341
 1147 00e0 00000000 		.word	idx
 1148 00e4 00000000 		.word	ht_motor_instance
 1149              		.cfi_endproc
 1150              	.LFE282:
 1152              		.section	.text.HTMotorOuterLoop,"ax",%progbits
 1153              		.align	1
 1154              		.global	HTMotorOuterLoop
 1155              		.syntax unified
 1156              		.thumb
 1157              		.thumb_func
 1159              	HTMotorOuterLoop:
 1160              	.LVL112:
 1161              	.LFB288:
 232:modules/motor/HTmotor/HT04.c **** 
 233:modules/motor/HTmotor/HT04.c **** void HTMotorOuterLoop(HTMotorInstance *motor, Closeloop_Type_e type)
 234:modules/motor/HTmotor/HT04.c **** {
 1162              		.loc 1 234 1 is_stmt 1 view -0
 1163              		.cfi_startproc
 1164              		@ args = 0, pretend = 0, frame = 0
 1165              		@ frame_needed = 0, uses_anonymous_args = 0
 1166              		@ link register save eliminated.
 235:modules/motor/HTmotor/HT04.c ****     motor->motor_settings.outer_loop_type = type;
 1167              		.loc 1 235 5 view .LVU314
 1168              		.loc 1 235 43 is_stmt 0 view .LVU315
 1169 0000 80F82C10 		strb	r1, [r0, #44]
 236:modules/motor/HTmotor/HT04.c **** }
 1170              		.loc 1 236 1 view .LVU316
 1171 0004 7047     		bx	lr
 1172              		.cfi_endproc
 1173              	.LFE288:
 1175              		.section	.rodata.str1.4,"aMS",%progbits,1
 1176              		.align	2
 1177              	.LC0:
 1178 0000 68745F74 		.ascii	"ht_task_name\000"
 1178      61736B5F 
 1178      6E616D65 
 1178      00
 1179              		.section	.bss.zero_buff,"aw",%nobits
 1180              		.align	2
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 29


 1183              	zero_buff:
 1184 0000 00000000 		.space	6
 1184      0000
 1185              		.section	.bss.ht_task_handle,"aw",%nobits
 1186              		.align	2
 1189              	ht_task_handle:
 1190 0000 00000000 		.space	16
 1190      00000000 
 1190      00000000 
 1190      00000000 
 1191              		.section	.bss.ht_motor_instance,"aw",%nobits
 1192              		.align	2
 1195              	ht_motor_instance:
 1196 0000 00000000 		.space	16
 1196      00000000 
 1196      00000000 
 1196      00000000 
 1197              		.section	.bss.idx,"aw",%nobits
 1200              	idx:
 1201 0000 00       		.space	1
 1202              		.section	.rodata
 1203              		.align	2
 1204              		.set	.LANCHOR0,. + 0
 1205              	.LC2:
 1206 0000 00000000 		.word	.LC0
 1207 0004 00000000 		.word	HTMotorTask
 1208 0008 0000     		.short	0
 1209 000a 0000     		.space	2
 1210 000c 00000000 		.word	0
 1211 0010 80000000 		.word	128
 1212 0014 00000000 		.word	0
 1213 0018 00000000 		.word	0
 1214              		.text
 1215              	.Letext0:
 1216              		.file 2 "D:/arm-gnu-toolchain-14.2.rel1-mingw-w64-x86_64-arm-none-eabi/arm-none-eabi/include/machi
 1217              		.file 3 "D:/arm-gnu-toolchain-14.2.rel1-mingw-w64-x86_64-arm-none-eabi/arm-none-eabi/include/sys/_
 1218              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f407xx.h"
 1219              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1220              		.file 6 "D:/arm-gnu-toolchain-14.2.rel1-mingw-w64-x86_64-arm-none-eabi/lib/gcc/arm-none-eabi/14.2.
 1221              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 1222              		.file 8 "bsp/can/bsp_can.h"
 1223              		.file 9 "modules/algorithm/controller.h"
 1224              		.file 10 "modules/motor/motor_def.h"
 1225              		.file 11 "modules/daemon/daemon.h"
 1226              		.file 12 "modules/motor/HTmotor/HT04.h"
 1227              		.file 13 "Middlewares/Third_Party/FreeRTOS/Source/portable/GCC/ARM_CM4F/portmacro.h"
 1228              		.file 14 "Middlewares/Third_Party/FreeRTOS/Source/include/FreeRTOS.h"
 1229              		.file 15 "Middlewares/Third_Party/FreeRTOS/Source/include/task.h"
 1230              		.file 16 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
 1231              		.file 17 "D:/arm-gnu-toolchain-14.2.rel1-mingw-w64-x86_64-arm-none-eabi/arm-none-eabi/include/stri
 1232              		.file 18 "D:/arm-gnu-toolchain-14.2.rel1-mingw-w64-x86_64-arm-none-eabi/arm-none-eabi/include/stdl
 1233              		.file 19 "modules/algorithm/user_lib.h"
 1234              		.file 20 "bsp/dwt/bsp_dwt.h"
 1235              		.file 21 "<built-in>"
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 30


DEFINED SYMBOLS
                            *ABS*:00000000 HT04.c
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:21     .text.float_to_uint:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:26     .text.float_to_uint:00000000 float_to_uint
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:67     .text.uint_to_float:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:72     .text.uint_to_float:00000000 uint_to_float
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:111    .text.HTMotorSetMode:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:116    .text.HTMotorSetMode:00000000 HTMotorSetMode
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:165    .text.HTMotorSetMode:00000038 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1183   .bss.zero_buff:00000000 zero_buff
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:170    .text.HTMotorLostCallback:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:175    .text.HTMotorLostCallback:00000000 HTMotorLostCallback
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:224    .text.HTMotorLostCallback:0000002c $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:229    .text.HTMotorDecode:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:234    .text.HTMotorDecode:00000000 HTMotorDecode
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:361    .text.HTMotorDecode:000000b0 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:372    .text.HTMotorTask:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:378    .text.HTMotorTask:00000000 HTMotorTask
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:636    .text.HTMotorTask:00000148 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:642    .text.HTMotorCalibEncoder:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:648    .text.HTMotorCalibEncoder:00000000 HTMotorCalibEncoder
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:801    .text.HTMotorCalibEncoder:000000e4 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:813    .text.HTMotorSetRef:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:819    .text.HTMotorSetRef:00000000 HTMotorSetRef
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:836    .text.HTMotorControlInit:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:842    .text.HTMotorControlInit:00000000 HTMotorControlInit
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:931    .text.HTMotorControlInit:00000068 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1200   .bss.idx:00000000 idx
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1195   .bss.ht_motor_instance:00000000 ht_motor_instance
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1189   .bss.ht_task_handle:00000000 ht_task_handle
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:939    .text.HTMotorStop:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:945    .text.HTMotorStop:00000000 HTMotorStop
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:963    .text.HTMotorEnable:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:969    .text.HTMotorEnable:00000000 HTMotorEnable
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:987    .text.HTMotorInit:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:993    .text.HTMotorInit:00000000 HTMotorInit
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1144   .text.HTMotorInit:000000d4 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1153   .text.HTMotorOuterLoop:00000000 $t
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1159   .text.HTMotorOuterLoop:00000000 HTMotorOuterLoop
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1176   .rodata.str1.4:00000000 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1180   .bss.zero_buff:00000000 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1186   .bss.ht_task_handle:00000000 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1192   .bss.ht_motor_instance:00000000 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1201   .bss.idx:00000000 $d
C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s:1203   .rodata:00000000 $d

UNDEFINED SYMBOLS
CANTransmit
DaemonReload
DWT_GetDeltaT
AverageFilter
PIDCalculate
osDelay
DWT_Delay
__itoa
strcat
osThreadCreate
ARM GAS  C:\Users\29237\AppData\Local\Temp\ccjS9KAT.s 			page 31


malloc
memset
PIDInit
CANRegister
DaemonRegister
